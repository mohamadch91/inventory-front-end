{"version":3,"file":"static/js/8538.79143cd4.chunk.js","mappings":"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","sources":["app/shared/MenuIcon.js","app/facilities/FacilityList.js","app/services/facilities.service.js","app/shared/EditIcon.js","app/shared/SharedTable.js"],"sourcesContent":["function MenuIcon() {\n  return (\n    <>\n      <svg\n        version=\"1.1\"\n        id=\"Capa_1\"\n        xmlns=\"http://www.w3.org/2000/svg\"\n        width=\"20\"\n        height=\"20\"\n        viewBox=\"0 0 281.488 281.488\"\n      >\n        <g>\n          <path\n            d=\"M140.744,0C63.138,0,0,63.138,0,140.744s63.138,140.744,140.744,140.744s140.744-63.138,140.744-140.744\n\t\tS218.351,0,140.744,0z M140.744,263.488C73.063,263.488,18,208.426,18,140.744S73.063,18,140.744,18\n\t\ts122.744,55.063,122.744,122.744S208.426,263.488,140.744,263.488z\"\n          />\n          <path d=\"M195.813,89.334H85.676c-4.971,0-9,4.029-9,9s4.029,9,9,9h110.137c4.971,0,9-4.029,9-9S200.783,89.334,195.813,89.334z\" />\n          <path d=\"M195.813,131.744H85.676c-4.971,0-9,4.029-9,9s4.029,9,9,9h110.137c4.971,0,9-4.029,9-9S200.783,131.744,195.813,131.744z\" />\n          <path d=\"M195.813,174.154H85.676c-4.971,0-9,4.029-9,9s4.029,9,9,9h110.137c4.971,0,9-4.029,9-9S200.783,174.154,195.813,174.154z\" />\n        </g>\n      </svg>\n    </>\n  );\n}\n\nexport default MenuIcon;\n","import React, { useEffect, useState } from \"react\";\nimport { TableBody, TableCell, TableHead, TableRow } from \"@mui/material\";\nimport Tooltip from \"@mui/material/Tooltip\";\nimport \"../styles/table.scss\";\nimport Spinner from \"../shared/Spinner\";\nimport { useQuery } from \"react-query\";\nimport SharedTable from \"../shared/SharedTable\";\nimport FacilitiesService from \"../services/facilities.service\";\nimport EditIcon from \"../shared/EditIcon\";\nimport MenuIcon from \"../shared/MenuIcon\";\nimport { Link } from \"react-router-dom\";\nimport { Trans } from \"react-i18next\";\n\nfunction FacilityList() {\n  const [selectedParentId, setSelectedParentId] = useState(null);\n  const [allFacility, setAllFacility] = useState([]);\n\n  const { isLoading: isFacilityDefaultLoading, refetch: refetchFacilities } =\n    useQuery(\n      [\"facility-default-value\", selectedParentId],\n      async () => {\n        const res = await FacilitiesService.getFacilities();\n        return res.data;\n      },\n      {\n        enabled: false,\n        onSuccess(data) {\n          setAllFacility(data);\n        },\n      }\n    );\n\n  console.log(selectedParentId);\n\n  const { isLoading: isGetSubFacilityLoading, refetch: fetchSubFacilities } =\n    useQuery(\n      [\"sub-facilities\", selectedParentId],\n      async () => {\n        const res = await FacilitiesService.getSubFacilities(selectedParentId);\n        return res.data;\n      },\n      {\n        refetchOnMount: false,\n        enabled: false,\n        onSuccess(data) {\n          // const _allFacility = [...allFacility];\n          // const parentIndex = _allFacility.findIndex(\n          //   (fac) => fac.id === selectedParentId\n          // );\n          // for (let i = 0; i < data.length; i++) {\n          //   const element = data[i];\n          //   if (!_allFacility.find((fac) => fac.id === element.id)) {\n          //     _allFacility.splice(parentIndex + i + 1, 0, element);\n          //   }\n          // }\n          setAllFacility(data);\n        },\n      }\n    );\n\n  useEffect(() => {\n    refetchFacilities();\n  }, []);\n\n  useEffect(() => {\n    if (selectedParentId) {\n      fetchSubFacilities();\n    }\n  }, [selectedParentId]);\n\n  const convertDate = (date) => {\n    if (date) {\n      return new Date(date).toISOString().split(\"T\")[0];\n    }\n  };\n\n  if (isFacilityDefaultLoading) {\n    return <Spinner />;\n  }\n\n  return (\n    <div>\n      <h3 className=\"page-title mb-3\">\n        <Trans>Facility list</Trans>\n      </h3>\n      <div className=\"mt-3\">\n        <div className=\"card\">\n          <div className=\"card-body\">\n            <div className=\"mt-5 table-container\">\n              <SharedTable>\n                <TableHead>\n                  <TableRow>\n                    <TableCell className=\"col-sm-2\">\n                      <Trans>Facility name</Trans>\n                    </TableCell>\n                    <TableCell className=\"col-sm-1\">Level</TableCell>\n                    <TableCell className=\"col-sm-2\">\n                      <Trans>Number of lower level facility</Trans>\n                    </TableCell>\n                    <TableCell className=\"col-sm-1\">\n                      <Trans>Code</Trans>\n                    </TableCell>\n                    <TableCell className=\"col-sm-2\">\n                      <Trans>Type</Trans>\n                    </TableCell>\n                    <TableCell className=\"col-sm-2\">\n                      <Trans>Last Changes On</Trans>\n                    </TableCell>\n                    <TableCell className=\"col-sm-2\">\n                      <Trans>Tool box</Trans>\n                    </TableCell>\n                  </TableRow>\n                </TableHead>\n                <TableBody>\n                  {allFacility.map((facility, index) => {\n                    return (\n                      <TableRow key={index}>\n                        <TableCell className=\"col-sm-2\">\n                          {facility.name ?? \"-\"}\n                        </TableCell>\n                        <TableCell className=\"col-sm-1\">\n                          {facility.level ?? \"-\"}\n                        </TableCell>\n                        <TableCell className=\"col-sm-2\">\n                          {facility.loverlevelfac ?? \"-\"}\n                        </TableCell>\n                        <TableCell className=\"col-sm-1\">\n                          {facility.code ?? \"-\"}\n                        </TableCell>\n                        <TableCell className=\"col-sm-2\">\n                          {facility.type ?? \"-\"}\n                        </TableCell>\n                        <TableCell className=\"col-sm-2\">\n                          {convertDate(facility.updated_at)}\n                        </TableCell>\n                        <TableCell className=\"col-sm-2\">\n                          <Link to={`/facilities/info/${facility.id}`}>\n                            <Tooltip title=\"edit\">\n                              <button className=\"edit-btn\">\n                                <EditIcon />\n                              </button>\n                            </Tooltip>\n                          </Link>\n                          {facility.parentid && (\n                            <Tooltip title=\"Sub facilities\">\n                              <button\n                                className=\"edit-btn\"\n                                disabled={\n                                  isGetSubFacilityLoading &&\n                                  facility.parentid === selectedParentId\n                                }\n                                onClick={() =>\n                                  setSelectedParentId(facility.parentid)\n                                }\n                              >\n                                <MenuIcon />\n                              </button>\n                            </Tooltip>\n                          )}\n                        </TableCell>\n                      </TableRow>\n                    );\n                  })}\n                </TableBody>\n              </SharedTable>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default FacilityList;\n","import axios from \"axios\";\nimport authHeader from \"./auth-header\";\n\nconst API_URL = \"http://5.182.47.38:8001/facilities/\";\n\nclass FacilitiesService {\n  getFacilities(id) {\n    const params = {};\n    if (id) {\n      params.id = id;\n    }\n    return axios.get(API_URL, {\n      headers: { Authorization: authHeader() },\n      params,\n    });\n  }\n  getSubFacilities(id) {\n    const params = { id };\n    return axios.get(API_URL + \"parent\", {\n      headers: { Authorization: authHeader() },\n      params,\n    });\n  }\n  getFacilityFields() {\n    return axios.get(API_URL + \"facility-field\", {\n      headers: { Authorization: authHeader() },\n    });\n  }\n  postFacility(payload) {\n    return axios.post(API_URL, payload, {\n      headers: { Authorization: authHeader() },\n    });\n  }\n  putFacility(payload) {\n    return axios.put(API_URL, payload, {\n      headers: { Authorization: authHeader() },\n    });\n  }\n}\n\nexport default new FacilitiesService();\n","function EditIcon() {\n  return (\n    <>\n      <svg\n        version=\"1.1\"\n        xmlns=\"http://www.w3.org/2000/svg\"\n        viewBox=\"0 0 512 512\"\n        width=\"20\"\n        height=\"20\"\n        xmlnsXlink=\"http://www.w3.org/1999/xlink\"\n        enable-background=\"new 0 0 512 512\"\n      >\n        <path d=\"m455.1,137.9l-32.4,32.4-81-81.1 32.4-32.4c6.6-6.6 18.1-6.6 24.7,0l56.3,56.4c6.8,6.8 6.8,17.9 0,24.7zm-270.7,271l-81-81.1 209.4-209.7 81,81.1-209.4,209.7zm-99.7-42l60.6,60.7-84.4,23.8 23.8-84.5zm399.3-282.6l-56.3-56.4c-11-11-50.7-31.8-82.4,0l-285.3,285.5c-2.5,2.5-4.3,5.5-5.2,8.9l-43,153.1c-2,7.1 0.1,14.7 5.2,20 5.2,5.3 15.6,6.2 20,5.2l153-43.1c3.4-0.9 6.4-2.7 8.9-5.2l285.1-285.5c22.7-22.7 22.7-59.7 0-82.5z\" />\n      </svg>\n    </>\n  );\n}\n\nexport default EditIcon;\n","import { Table, TableContainer } from \"@mui/material\";\n\nfunction SharedTable({ children }) {\n  return (\n    <>\n      <TableContainer>\n        <Table>{children}</Table>\n      </TableContainer>\n    </>\n  );\n}\n\nexport default SharedTable;\n"],"names":["version","id","xmlns","width","height","viewBox","d","useState","selectedParentId","setSelectedParentId","allFacility","setAllFacility","useQuery","FacilitiesService","res","data","enabled","onSuccess","isFacilityDefaultLoading","isLoading","refetchFacilities","refetch","console","log","refetchOnMount","isGetSubFacilityLoading","fetchSubFacilities","useEffect","convertDate","date","Date","toISOString","split","Spinner","className","Trans","SharedTable","TableHead","TableRow","TableCell","TableBody","map","facility","index","name","level","loverlevelfac","code","type","updated_at","to","Tooltip","title","EditIcon","parentid","disabled","onClick","API_URL","params","axios","headers","Authorization","authHeader","payload","xmlnsXlink","children"],"sourceRoot":""}