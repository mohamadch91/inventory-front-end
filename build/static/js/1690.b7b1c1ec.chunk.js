"use strict";(self.webpackChunkinventory=self.webpackChunkinventory||[]).push([[1690],{91690:function(e,n,s){s.r(n),s.d(n,{default:function(){return q}});var t=s(29439),l=s(72791),a=s(74165),r=s(15861),i=s(16149),c=s(30606),o=s(80184),d={display:"flex",justifyContent:"flex-start",alignItems:"center",lineHeight:"1.4"},u=function(e){return(0,o.jsxs)(i.Z.Group,{className:"row mb-0",children:[(0,o.jsx)("label",{className:"col-sm-3 text-right control-label",style:d,children:(0,o.jsxs)(c.c,{children:[" ",e.label," "]})}),(0,o.jsx)("div",{className:"col-sm-7",children:(0,o.jsxs)(i.Z.Control,{size:"sm",onChange:function(n){e.onChange(n)},className:"form-select",as:"select",children:[(0,o.jsx)("option",{value:"-1",children:" Please select "}),e.options.map((function(e){return(0,o.jsx)("option",{value:e.id,children:e.op},e.id)}))]})}),(0,o.jsx)("hr",{className:"my-3 "})]})},m=function(e){return(0,o.jsx)("div",{className:"form-check pl-2 ",children:(0,o.jsxs)("label",{className:"form-check-label",children:[(0,o.jsx)("input",{onChange:e.onChange,type:"checkbox",className:"form-check-input"}),(0,o.jsx)("i",{className:"input-helper"}),e.label]})})},h=function(e){return(0,o.jsxs)(i.Z.Group,{className:"pt-1 row",children:[(0,o.jsx)("label",{className:"py-2",children:" Years Installed: "}),(0,o.jsx)(i.Z.Control,{style:{width:"100%"},type:"number",className:"form-control col-sm-3 mt-2 ml-3",placeholder:"from","aria-label":"from-year",onChange:e.onFromChange}),(0,o.jsx)(i.Z.Control,{style:{width:"100%"},type:"number",className:"form-control mt-2 col-sm-3 ml-3",placeholder:"to","aria-label":"from-year",onChange:e.onToChange})]})},f=function(e){return(0,o.jsxs)(i.Z.Group,{className:"ml-2 w-100",children:[(0,o.jsx)("label",{className:"py-2",children:" Item Code "}),(0,o.jsx)(i.Z.Control,{style:{width:"50%"},type:"text",className:"form-control mt-2 ",placeholder:"ABC05","aria-label":"from-year",onChange:e.onChange})]})},p=s(91933),x=s(74936),v=s(59909),j=s(4942),y=s(1413),g=function(e,n){return"CHANGE"===n.type?(0,y.Z)((0,y.Z)({},e),{},(0,j.Z)({},n.field,n.value)):{facility:-1,item_class:-1,item_type:-1,physical:-1,working:-1,user:-1,year_from:-1,year_to:-1,code:-1,func:!1}},N=s(65218),C=function(e){var n=(0,l.useState)([]),s=(0,t.Z)(n,2),i=s[0],c=s[1],d=(0,l.useReducer)(g,{}),j=(0,t.Z)(d,2),y=j[0],C=j[1],b=(0,p.useQuery)([],(0,r.Z)((0,a.Z)().mark((function e(){var n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.Z.getQrHelper();case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)}))),{refetchOnMount:!0}),Z=b.data;if(b.isLoading||0===Z.length)return(0,o.jsx)(v.Z,{});var w=Z.facility.map((function(e){return{id:e.id,op:e.name}})),G=Z.items.map((function(e){return{id:e.item_class.id,op:e.item_class.title}})),_=Z.working.map((function(e){return{id:e.id,op:e.name}})),k=Z.physical.map((function(e){return{id:e.id,op:e.name}})),A=Z.users.map((function(e){return{id:e.id,op:e.name}}));return console.log(y),(0,o.jsxs)("div",{className:"row",children:[(0,o.jsxs)("div",{className:"col-sm-7",children:[(0,o.jsx)(u,{label:"Main Facility",options:w,onChange:function(e){C({type:"CHANGE",field:"facility",value:e.target.value})}},"A"),(0,o.jsx)(u,{label:"Item class",options:G,onChange:function(e){C({type:"CHANGE",field:"item_class",value:e.target.value});var n=[],s=e.target.value;Z.items.map((function(e){e.item_class.id===+s&&e.item_type.map((function(e){n.push({id:e.id,op:e.title})}))})),c(n)}},"B"),(0,o.jsx)(u,{label:"Item type",options:i,onChange:function(e){C({type:"CHANGE",field:"item_type",value:e.target.value})}},"C"),(0,o.jsx)(u,{label:"Working status",options:_,onChange:function(e){C({type:"CHANGE",field:"working",value:e.target.value})}},"D"),(0,o.jsx)(u,{label:"Physical condition",options:k,onChange:function(e){C({type:"CHANGE",field:"physical",value:e.target.value})}},"E"),(0,o.jsx)(u,{label:"User",options:A,onChange:function(e){C({type:"CHANGE",field:"user",value:e.target.value})}},"F")]}),(0,o.jsxs)("div",{className:"col-sm-4 ml-5",children:[(0,o.jsx)(h,{onFromChange:function(e){C({type:"CHANGE",field:"year_from",value:e.target.value})},onToChange:function(e){C({type:"CHANGE",field:"year_to",value:e.target.value})}}),(0,o.jsx)("hr",{className:"my-1"}),(0,o.jsx)(f,{onChange:function(e){C({type:"CHANGE",field:"code",value:e.target.value})}}),(0,o.jsx)("hr",{className:"my-1"}),(0,o.jsx)(m,{onChange:function(e){C({type:"CHANGE",field:"func",value:e.target.checked})},label:"Is functioning"}),(0,o.jsx)("button",{onClick:function(){void 0!==y.item_class&&"-1"!==y.item_class||N.ZP.error("Please select  item class"),e.onSubmit(y)},type:"button",className:"btn btn-primary btn-fw mt-3 w-75",children:"Search QR code"})]})]})},b=s(23821),Z=(s(93650),s(56890)),w=s(35855),G=s(53994),_=s(53382),k=s(22057),A=function(e){return(0,o.jsxs)("tr",{children:[(0,o.jsx)(G.Z,{className:"col-sm-2",children:null===e||void 0===e?void 0:e.itemClass}),(0,o.jsx)(G.Z,{className:"col-sm-2",children:null===e||void 0===e?void 0:e.itemType}),(0,o.jsx)(G.Z,{className:"col-sm-2",children:null===e||void 0===e?void 0:e.pqsCode}),(0,o.jsx)(G.Z,{className:"col-sm-2",children:null===e||void 0===e?void 0:e.code}),(0,o.jsx)(G.Z,{className:"qr",children:(0,o.jsx)(k.tv,{value:null===e||void 0===e?void 0:e.qr,size:128})})]})},H=l.forwardRef((function(e,n){var s,t=(0,p.useQuery)(["filter"],(0,r.Z)((0,a.Z)().mark((function n(){var s;return(0,a.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,x.Z.getQrTableData(e.query);case 2:return s=n.sent,console.log("res.data is"),console.log(s.data),n.abrupt("return",null===s||void 0===s?void 0:s.data);case 6:case"end":return n.stop()}}),n)}))),{refetchOnMount:!0}),l=t.data;if(t.isLoading)return(0,o.jsx)(v.Z,{});var i=l.map((function(e,n){return(0,o.jsx)(A,{itemClass:null===e||void 0===e?void 0:e.item_class,itemType:null===e||void 0===e?void 0:e.item_type,pqsCode:null===e||void 0===e?void 0:e.pqs_code,code:null===e||void 0===e?void 0:e.code,qr:null===e||void 0===e?void 0:e.qr},n)}));return(0,o.jsxs)("div",{ref:n,className:"mt-5 ",style:{color:"#000"},children:[(0,o.jsxs)("div",{className:"text-center",children:[(0,o.jsx)("div",{children:(0,o.jsx)("h4",{children:"Inventory and Gap Analysis System (IGA)"})}),(0,o.jsx)("div",{children:(0,o.jsx)("h4",{children:null===(s=JSON.parse(localStorage.getItem("country")))||void 0===s?void 0:s.country})})]}),(0,o.jsx)("div",{className:"card mt-4",children:(0,o.jsx)("div",{className:"card-body",children:(0,o.jsx)("div",{className:"table-container-to-print",children:(0,o.jsxs)(b.Z,{children:[(0,o.jsx)(Z.Z,{children:(0,o.jsxs)(w.Z,{children:[(0,o.jsx)(G.Z,{className:"col-sm-2",children:(0,o.jsx)(c.c,{children:"Item class"})}),(0,o.jsx)(G.Z,{className:"col-sm-2",children:(0,o.jsx)(c.c,{children:"Item category"})}),(0,o.jsx)(G.Z,{className:"col-sm-2",children:(0,o.jsx)(c.c,{children:"Model"})}),(0,o.jsx)(G.Z,{className:"col-sm-2",children:(0,o.jsx)(c.c,{children:"code"})}),(0,o.jsx)(G.Z,{className:"col-sm-2",children:(0,o.jsx)(c.c,{children:"QR Code"})})]})}),(0,o.jsx)(_.Z,{children:i})]})})})})]})})),E=s(61146),I=s.n(E),q=function(){var e=(0,l.useState)(),n=(0,t.Z)(e,2),s=n[0],a=n[1],r=(0,l.useRef)();return(0,o.jsxs)(l.Fragment,{children:[(0,o.jsx)(C,{onSubmit:function(e){var n="";for(var s in e)"-1"!==e[s]&&(n+=s+"="+e[s]+"&");a(n)}}),s&&(0,o.jsxs)("div",{children:[(0,o.jsx)(I(),{trigger:function(){return(0,o.jsxs)("button",{className:"btn btn-info btn-icon-text",children:["Print ",(0,o.jsx)("i",{className:"mdi mdi-printer btn-icon-append"})]})},content:function(){return r.current},documentTitle:"IGA Reports"}),(0,o.jsx)(H,{ref:r,query:s})]})]})}},23821:function(e,n,s){var t=s(39281),l=s(79836),a=s(80184);n.Z=function(e){var n=e.children;return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(t.Z,{children:(0,a.jsx)(l.Z,{children:n})})})}},93650:function(){}}]);
//# sourceMappingURL=1690.b7b1c1ec.chunk.js.map