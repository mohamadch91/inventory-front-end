{"version":3,"file":"static/js/2346.737a5b84.chunk.js","mappings":"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","sources":["app/items/ItemList.js","app/shared/EditIcon.js","app/shared/SharedTable.js","app/shared/TrashIcon.js"],"sourcesContent":["import React from \"react\";\nimport {\n  TableBody,\n  TableCell,\n  TableHead,\n  TableRow,\n  Tooltip,\n} from \"@mui/material\";\nimport \"../styles/table.scss\";\nimport Spinner from \"../shared/Spinner\";\nimport { useMutation, useQuery } from \"react-query\";\nimport SharedTable from \"../shared/SharedTable\";\nimport EditIcon from \"../shared/EditIcon\";\nimport { Link, useHistory } from \"react-router-dom\";\nimport ItemService from \"../services/item.service\";\nimport { Trans } from \"react-i18next\";\nimport TrashIcon from \"../shared/TrashIcon\";\n\nfunction ItemList() {\n  const history = useHistory();\n  const params = new URLSearchParams(history.location.search);\n  const facility = params.get(\"facility\");\n\n  const {\n    data: items,\n    isLoading: isItemsDefaultLoading,\n    refetch: refetchItems,\n  } = useQuery(\n    [\"item-default-value\", facility],\n    async () => {\n      const res = await ItemService.getItems(undefined, facility);\n      return res.data;\n    },\n    {\n      refetchOnMount: true,\n    }\n  );\n\n  const { data: itemClassesAndTypes, isLoading: isItemClassesAndTypesLoading } =\n    useQuery(\n      [\"item-classes-and-types\"],\n      async () => {\n        const res = await ItemService.getItemClassesAndTypes();\n        return res.data.data.filter((item) => item.item_type.length > 0);\n      },\n      {\n        refetchOnMount: true,\n      }\n    );\n\n  const { isLoading: isDeleteLoading, mutateAsync: deleteItem } = useMutation({\n    mutationFn: async (id) => {\n      const res = await ItemService.deleteItem(id);\n      return res;\n    },\n    onSuccess() {\n      refetchItems();\n    },\n  });\n\n  const convertDate = (date) => {\n    console.log(date);\n    return new Date(date).toISOString().split(\"T\")[0];\n  };\n\n  if (isItemsDefaultLoading || isItemClassesAndTypesLoading) {\n    return <Spinner />;\n  }\n\n  return (\n    <div>\n      <h3 className=\"page-title mb-3\">\n        <Trans>Item list</Trans>\n      </h3>\n      <div className=\"mt-3\">\n        <div className=\"card\">\n          <div className=\"card-body\">\n            <div className=\"mt-5 table-container\">\n              <SharedTable>\n                <TableHead>\n                  <TableRow>\n                    <TableCell className=\"col-sm-2\">\n                      <Trans>Item class</Trans>\n                    </TableCell>\n                    <TableCell className=\"col-sm-2\">\n                      <Trans>Item category</Trans>\n                    </TableCell>\n                    <TableCell className=\"col-sm-2\">\n                      <Trans>Code</Trans>\n                    </TableCell>\n                    <TableCell className=\"col-sm-2\">\n                      <Trans>Manufacturer</Trans>\n                    </TableCell>\n                    <TableCell className=\"col-sm-2\">\n                      <Trans>Last Changes On</Trans>\n                    </TableCell>\n                    <TableCell className=\"col-sm-2\">\n                      <Trans>Edit</Trans>\n                    </TableCell>\n                  </TableRow>\n                </TableHead>\n                <TableBody>\n                  {items?.map((item) => {\n                    const itemClass = itemClassesAndTypes?.find(\n                      (itemC) => itemC.item_class.id === item.item_class\n                    );\n                    console.log(itemClass, \"itemClass\");\n                    const itemType = itemClass?.item_type.find(\n                      (itemT) => itemT.id === item.item_type\n                    );\n                    console.log(itemType);\n                    return (\n                      <TableRow key={item.id}>\n                        <TableCell className=\"col-sm-2\">\n                          {itemClass?.item_class.title ?? \"-\"}\n                        </TableCell>\n                        <TableCell className=\"col-sm-2\">\n                          {itemType?.title ?? \"-\"}\n                        </TableCell>\n                        <TableCell className=\"col-sm-2\">\n                          {item.code ?? \"-\"}\n                        </TableCell>\n                        <TableCell className=\"col-sm-2\">\n                          {item.Manufacturer ?? \"-\"}\n                        </TableCell>\n                        <TableCell className=\"col-sm-2\">\n                          {item?.updated_at\n                            ? convertDate(item.updated_at)\n                            : \"-\"}\n                        </TableCell>\n                        <TableCell className=\"col-sm-2\">\n                          <Link to={`/items/info/${item.id}`}>\n                            <div style={{ width: \"20px\", height: \"20px\" }}>\n                              <EditIcon />\n                            </div>\n                          </Link>\n                          <Tooltip title=\"Delete facility\">\n                            <button\n                              className=\"edit-btn\"\n                              disabled={isDeleteLoading}\n                              onClick={() => deleteItem(facility.id)}\n                            >\n                              <TrashIcon />\n                            </button>\n                          </Tooltip>\n                        </TableCell>\n                      </TableRow>\n                    );\n                  })}\n                </TableBody>\n              </SharedTable>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default ItemList;\n","function EditIcon() {\n  return (\n    <>\n      <svg\n        version=\"1.1\"\n        xmlns=\"http://www.w3.org/2000/svg\"\n        viewBox=\"0 0 512 512\"\n        width=\"20\"\n        height=\"20\"\n        xmlnsXlink=\"http://www.w3.org/1999/xlink\"\n        enable-background=\"new 0 0 512 512\"\n      >\n        <path d=\"m455.1,137.9l-32.4,32.4-81-81.1 32.4-32.4c6.6-6.6 18.1-6.6 24.7,0l56.3,56.4c6.8,6.8 6.8,17.9 0,24.7zm-270.7,271l-81-81.1 209.4-209.7 81,81.1-209.4,209.7zm-99.7-42l60.6,60.7-84.4,23.8 23.8-84.5zm399.3-282.6l-56.3-56.4c-11-11-50.7-31.8-82.4,0l-285.3,285.5c-2.5,2.5-4.3,5.5-5.2,8.9l-43,153.1c-2,7.1 0.1,14.7 5.2,20 5.2,5.3 15.6,6.2 20,5.2l153-43.1c3.4-0.9 6.4-2.7 8.9-5.2l285.1-285.5c22.7-22.7 22.7-59.7 0-82.5z\" />\n      </svg>\n    </>\n  );\n}\n\nexport default EditIcon;\n","import { Table, TableContainer } from \"@mui/material\";\n\nfunction SharedTable({ children }) {\n  return (\n    <>\n      <TableContainer>\n        <Table>{children}</Table>\n      </TableContainer>\n    </>\n  );\n}\n\nexport default SharedTable;\n","function TrashIcon() {\n  return (\n    <svg\n      version=\"1.1\"\n      id=\"Layer_1\"\n      x=\"0px\"\n      y=\"0px\"\n      width=\"20px\"\n      height=\"20px\"\n      viewBox=\"0 0 473 473\"\n    >\n      <path\n        d=\"M324.285,215.015V128h20V38h-98.384V0H132.669v38H34.285v90h20v305h161.523c23.578,24.635,56.766,40,93.477,40\n\t\tc71.368,0,129.43-58.062,129.43-129.43C438.715,277.276,388.612,222.474,324.285,215.015z M294.285,215.015\n\t\tc-18.052,2.093-34.982,7.911-50,16.669V128h50V215.015z M162.669,30h53.232v8h-53.232V30z M64.285,68h250v30h-250V68z M84.285,128\n\t\th50v275h-50V128z M164.285,403V128h50v127.768c-21.356,23.089-34.429,53.946-34.429,87.802c0,21.411,5.231,41.622,14.475,59.43\n\t\tH164.285z M309.285,443c-54.826,0-99.429-44.604-99.429-99.43s44.604-99.429,99.429-99.429s99.43,44.604,99.43,99.429\n\t\tS364.111,443,309.285,443z\"\n      />\n      <polygon\n        points=\"342.248,289.395 309.285,322.358 276.323,289.395 255.11,310.608 288.073,343.571 255.11,376.533 276.323,397.746 \n\t\t309.285,364.783 342.248,397.746 363.461,376.533 330.498,343.571 363.461,310.608 \t\"\n      />\n    </svg>\n  );\n}\n\nexport default TrashIcon;\n"],"names":["history","useHistory","facility","URLSearchParams","location","search","get","useQuery","ItemService","undefined","res","data","refetchOnMount","items","isItemsDefaultLoading","isLoading","refetchItems","refetch","filter","item","item_type","length","itemClassesAndTypes","isItemClassesAndTypesLoading","useMutation","mutationFn","id","onSuccess","isDeleteLoading","deleteItem","mutateAsync","className","map","itemClass","find","itemC","item_class","console","log","date","itemType","itemT","title","code","Manufacturer","updated_at","Date","toISOString","split","to","style","width","height","disabled","onClick","version","xmlns","viewBox","xmlnsXlink","d","children","x","y","points"],"sourceRoot":""}