"use strict";(self.webpackChunkinventory=self.webpackChunkinventory||[]).push([[4004],{71986:function(e,n,t){var i=t(15671),r=t(43144),s=t(39877),c=t(54318),l="http://5.182.47.38:8001/related/",a=function(){function e(){(0,i.Z)(this,e)}return(0,r.Z)(e,[{key:"getParameters",value:function(){return s.Z.get(l+"params",{headers:{Authorization:(0,c.Z)()}})}},{key:"getParameterDescriptions",value:function(e,n){return s.Z.get(l+"params/?id="+e+"&type="+n,{headers:{Authorization:(0,c.Z)()}})}},{key:"putParameters",value:function(e){return s.Z.put(l+"params/",e,{headers:{Authorization:(0,c.Z)()}})}},{key:"getItemFields",value:function(){return s.Z.get(l+"item-fields",{headers:{Authorization:(0,c.Z)()}})}},{key:"putItemFields",value:function(e){return s.Z.put(l+"item-fields",e,{headers:{Authorization:(0,c.Z)()}})}},{key:"getRelatedItemType",value:function(e){var n={};return e&&(n.id=e),s.Z.get(l+"related-item-type",{headers:{Authorization:(0,c.Z)()},params:n})}},{key:"putRelatedItemType",value:function(e){return s.Z.put(l+"related-item-type",e,{headers:{Authorization:(0,c.Z)()}})}},{key:"getRelatedFacility",value:function(){return s.Z.get(l+"related-facility/",{headers:{Authorization:(0,c.Z)()}})}},{key:"putRelatedFacility",value:function(e){return s.Z.put(l+"related-facility/",e,{headers:{Authorization:(0,c.Z)()}})}}]),e}();n.Z=new a},4004:function(e,n,t){t.r(n);var i=t(1413),r=t(93433),s=t(37762),c=t(74165),l=t(15861),a=t(29439),d=t(56890),u=t(35855),o=t(53994),h=t(53382),m=t(72791),x=t(23821),v=t(16149),f=t(69778),p=t(91933),j=t(59909),Z=t(95907),y=t(40277),g=t(70242),b=t(74512),w=t(64554),k=t(36151),N=t(74130),C=(t(93650),t(71986)),z=(t(2423),t(30606)),F=t(80184);n.default=function(){var e,n=(0,m.useState)(0),t=(0,a.Z)(n,2),I=t[0],S=t[1],A=(0,m.useState)(),L=(0,a.Z)(A,2),q=L[0],R=L[1],_=(0,m.useState)(),B=(0,a.Z)(_,2),O=B[0],T=B[1],P=(0,m.useState)([]),Q=(0,a.Z)(P,2),D=Q[0],E=Q[1],G=(0,m.useState)(null),M=(0,a.Z)(G,2),X=M[0],V=M[1],W=(0,m.useState)(""),H=(0,a.Z)(W,2),J=H[0],K=H[1],U=(0,p.useQuery)(["active-item-classes-with-item-type"],(0,l.Z)((0,c.Z)().mark((function e(){var n;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.Z.getActiveItemClassesWithFields();case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)}))),{onSuccess:function(e){R(e[0]),T(e[0].item_type[0])}}),Y=U.data,$=U.isLoading,ee=(0,p.useQuery)(["related-item-fields"],(0,l.Z)((0,c.Z)().mark((function e(){var n;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.Z.getItemFields();case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)}))),{}),ne=ee.data,te=ee.isLoading,ie=ee.refetch,re=(0,p.useQuery)(["related-item-type",null===O||void 0===O?void 0:O.id],(0,l.Z)((0,c.Z)().mark((function e(){var n;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.Z.getRelatedItemType(O.id);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)}))),{enabled:!$}).data,se=(0,m.useMemo)((function(){var e={};if(ne){var n,t=(0,s.Z)(ne);try{for(t.s();!(n=t.n()).done;){var i,r=n.value,c=null!==(i=e[r.topic])&&void 0!==i?i:[];c.push(r),e[r.topic]=c}}catch(l){t.e(l)}finally{t.f()}}return e}),[ne]),ce=function(e,n,t){var s=e.target.checked,c=(0,r.Z)(D),l=D.findIndex((function(e){return e.itemtypeid===O.id&&e.fieldid===n.id}));if(console.log(t),-1===l)c.push({itemtypeid:O.id,fieldid:n.id,required:"required"===t&&s,enable:"enable"!==t||s});else{var a=D[l];c[l]=(0,i.Z)((0,i.Z)({},a),{},{required:"required"===t?s:a.required,enable:"enable"===t?s:a.enable})}E(c)},le=function(){var e=(0,l.Z)((0,c.Z)().mark((function e(){return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.Z.putItemFields((0,i.Z)((0,i.Z)({},X),{},{name:J}));case 2:e.sent,ie(),V(null),K("");case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ae=function(){var e=(0,l.Z)((0,c.Z)().mark((function e(){return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.Z.putRelatedItemType(D);case 2:e.sent;case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,F.jsxs)("div",{children:[(0,F.jsxs)("h3",{className:"page-title mb-3",children:[(0,F.jsx)(z.c,{children:"Fields of"})," ",(0,F.jsx)(z.c,{children:'"item category"'})]}),$?(0,F.jsx)(j.Z,{}):(0,F.jsx)("div",{className:"mt-3",children:(0,F.jsx)("div",{className:"card",children:(0,F.jsx)("div",{className:"card-body",children:(0,F.jsxs)("div",{className:"row",children:[(0,F.jsx)("div",{className:"col-sm-12 col-lg-6",children:(0,F.jsxs)(v.Z.Group,{className:"row",children:[(0,F.jsxs)("label",{className:"col-sm-12",children:[(0,F.jsx)(z.c,{children:"Item class"})," "]}),(0,F.jsx)("div",{className:"col-sm-12",children:(0,F.jsx)(v.Z.Control,{onChange:function(e){R(Y[e.target.value])},className:"form-select",as:"select",children:Y.map((function(e,n){return(0,F.jsx)("option",{value:n,children:e.item_class.title})}))})})]})}),(0,F.jsx)("div",{className:"col-sm-12 col-lg-6",children:(0,F.jsxs)(v.Z.Group,{className:"row",children:[(0,F.jsx)("label",{className:"col-sm-12",children:(0,F.jsx)(z.c,{children:"Item category"})}),(0,F.jsx)("div",{className:"col-sm-12",children:(0,F.jsx)(v.Z.Control,{onChange:function(e){T(q.item_type[e.target.value])},className:"form-select",disabled:null===q,as:"select",children:null===q||void 0===q?void 0:q.item_type.map((function(e,n){return(0,F.jsx)("option",{value:n,children:e.title})}))})})]})})]})})})}),te?(0,F.jsx)(j.Z,{}):(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)("div",{className:"mt-3",children:(0,F.jsx)("div",{className:"card",children:(0,F.jsxs)("div",{className:"card-body pb-3",children:[(0,F.jsx)("div",{className:"row pb-4",style:{overflow:"auto"},children:(0,F.jsx)(g.Z,{activeStep:I,children:Object.keys(se).map((function(e,n){return(0,F.jsx)(b.Z,{onClick:function(){S(n)},children:(0,F.jsx)(N.Z,{color:"inherit",style:{width:"max-content"},children:e})},e)}))})}),(0,F.jsx)("div",{className:"row mt-2",children:(0,F.jsxs)(w.Z,{sx:{display:"flex",flexDirection:"row",pt:2},children:[(0,F.jsx)(k.Z,{color:"inherit",disabled:0===I,onClick:function(){S((function(e){return e-1}))},sx:{mr:1},children:(0,F.jsx)(z.c,{children:"Back"})}),(0,F.jsx)(w.Z,{sx:{flex:"1 1 auto"}}),(0,F.jsx)(k.Z,{disabled:I===Object.keys(se).length-1,onClick:function(){S((function(e){return e+1}))},sx:{mr:1},children:"Next"}),(0,F.jsx)("button",{className:"btn btn-primary ",onClick:ae,children:(0,F.jsx)(z.c,{children:"Save"})})]})})]})})}),(0,F.jsx)("div",{className:"mt-3",children:(0,F.jsx)("div",{className:"card",children:(0,F.jsx)("div",{className:"card-body p-3",children:(0,F.jsxs)("div",{className:"row",children:[(0,F.jsxs)("h4",{children:[" ",Object.keys(se)[I]]}),(0,F.jsx)("div",{className:"mt-5 table-container",children:(0,F.jsxs)(x.Z,{children:[(0,F.jsx)(d.Z,{children:(0,F.jsxs)(u.Z,{children:[(0,F.jsx)(o.Z,{className:"col-sm-4",children:(0,F.jsx)(z.c,{children:"Field name"})}),(0,F.jsx)(o.Z,{className:"col-sm-2",children:(0,F.jsx)(z.c,{children:"Enable"})}),(0,F.jsxs)(o.Z,{className:"col-sm-4",children:[(0,F.jsx)(z.c,{children:"Is this required field for"})," ",(0,F.jsx)(z.c,{children:"item category"}),"?"]}),(0,F.jsx)(o.Z,{className:"col-sm-2",children:(0,F.jsx)(z.c,{children:"Edit"})})]})}),(0,F.jsx)(h.Z,{children:null===(e=Object.values(se)[I])||void 0===e?void 0:e.map((function(e){var n,t,i=null!==(n=D.find((function(n){return n.fieldid===e.id&&n.itemtypeid===O.id})))&&void 0!==n?n:null===re||void 0===re?void 0:re.find((function(n){return e.id===n.field.id&&O.id===n.itemtype.id})),r=null!==(t=null===i||void 0===i?void 0:i.enable)&&void 0!==t?t:!!i,s=null===i||void 0===i?void 0:i.required;return(0,F.jsxs)(u.Z,{children:[(0,F.jsx)(o.Z,{className:"col-sm-4",children:(null===X||void 0===X?void 0:X.id)===e.id?(0,F.jsx)("input",{name:"field-name",type:"text",onChange:function(e){return K(e.target.value)},defaultValue:e.name}):e.name}),(0,F.jsx)(o.Z,{className:"col-sm-2",children:(0,F.jsx)("input",{type:"checkbox",disabled:!re,checked:r,onChange:function(n){return ce(n,e,"enable")}})}),(0,F.jsx)(o.Z,{className:"col-sm-4",children:(0,F.jsx)("input",{type:"checkbox",disabled:!r,checked:s,onChange:function(n){return ce(n,e,"required")}})}),(null===X||void 0===X?void 0:X.id)===e.id?(0,F.jsxs)(o.Z,{className:"col-sm-2",children:[(0,F.jsx)("button",{className:"save-btn",onClick:le,children:(0,F.jsx)(z.c,{children:"Save"})}),(0,F.jsx)("button",{className:"close-btn",onClick:function(){V(null),K("")},children:(0,F.jsx)(y.Z,{})})]}):(0,F.jsx)(o.Z,{className:"col-sm-2",children:(0,F.jsx)("button",{className:"edit-btn",onClick:function(){V(e),K(e.name)},children:(0,F.jsx)(Z.Z,{sx:{marginLeft:"0"}})})})]},e.id)}))})]})})]})})})})]})]})}},40277:function(e,n,t){var i=t(80184);n.Z=function(){return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)("svg",{version:"1.1",id:"Layer_1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",width:"121.31px",height:"122.876px",viewBox:"0 0 121.31 122.876",enableBackground:"new 0 0 121.31 122.876",xmlSpace:"preserve",children:(0,i.jsx)("g",{children:(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M90.914,5.296c6.927-7.034,18.188-7.065,25.154-0.068 c6.961,6.995,6.991,18.369,0.068,25.397L85.743,61.452l30.425,30.855c6.866,6.978,6.773,18.28-0.208,25.247 c-6.983,6.964-18.21,6.946-25.074-0.031L60.669,86.881L30.395,117.58c-6.927,7.034-18.188,7.065-25.154,0.068 c-6.961-6.995-6.992-18.369-0.068-25.397l30.393-30.827L5.142,30.568c-6.867-6.978-6.773-18.28,0.208-25.247 c6.983-6.963,18.21-6.946,25.074,0.031l30.217,30.643L90.914,5.296L90.914,5.296z"})})})})}},95907:function(e,n,t){var i=t(80184);n.Z=function(){return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",width:"20",height:"20",xmlnsXlink:"http://www.w3.org/1999/xlink","enable-background":"new 0 0 512 512",children:(0,i.jsx)("path",{d:"m455.1,137.9l-32.4,32.4-81-81.1 32.4-32.4c6.6-6.6 18.1-6.6 24.7,0l56.3,56.4c6.8,6.8 6.8,17.9 0,24.7zm-270.7,271l-81-81.1 209.4-209.7 81,81.1-209.4,209.7zm-99.7-42l60.6,60.7-84.4,23.8 23.8-84.5zm399.3-282.6l-56.3-56.4c-11-11-50.7-31.8-82.4,0l-285.3,285.5c-2.5,2.5-4.3,5.5-5.2,8.9l-43,153.1c-2,7.1 0.1,14.7 5.2,20 5.2,5.3 15.6,6.2 20,5.2l153-43.1c3.4-0.9 6.4-2.7 8.9-5.2l285.1-285.5c22.7-22.7 22.7-59.7 0-82.5z"})})})}},23821:function(e,n,t){var i=t(39281),r=t(79836),s=t(80184);n.Z=function(e){var n=e.children;return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(i.Z,{children:(0,s.jsx)(r.Z,{children:n})})})}},93650:function(){}}]);
//# sourceMappingURL=4004.aa1d4c88.chunk.js.map