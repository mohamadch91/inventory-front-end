"use strict";(self.webpackChunkinventory=self.webpackChunkinventory||[]).push([[3780],{73780:function(e,l,a){a.r(l),a.d(l,{Country:function(){return b},default:function(){return f}});var t=a(29439),s=a(4942),n=a(15671),o=a(43144),i=a(97326),r=a(60136),c=a(54062),d=a(72791),u=a(16149),m=a(17994),h=(a(23666),a(78559)),p=a.n(h),g=a(34045),v=a(65218),y=a(87649),x=a(30606),j=a(12902),C=a(80184);delete p().Icon.Default.prototype._getIconUrl,p().Icon.Default.mergeOptions({iconRetinaUrl:a(6431),iconUrl:a(37093),shadowUrl:a(68858)});var b=function(e){(0,r.Z)(a,e);var l=(0,c.Z)(a);function a(e){var t;return(0,n.Z)(this,a),(t=l.call(this,e)).changestate=function(e,l){t.setState((0,s.Z)({},l,e.target.value))},t.handleChange=function(e){t.setState({startDate:e})},t.handleSubmit=function(e){e.preventDefault(),e.stopPropagation();var l=e.currentTarget;if(!t.isCountryCodeValid()||!t.isCurrencyValid()||!t.isCountryValid())return t.setState({validated:!1}),e.preventDefault(),e.stopPropagation(),void v.Am.error((0,C.jsx)(x.c,{children:"complete form correctly"}));if(!1===l.checkValidity())e.preventDefault(),e.stopPropagation(),v.Am.error((0,C.jsx)(x.c,{children:"complete form correctly"}));else{var a;t.setState({validated:!0});var s=new FormData;s.append("country",t.state.CountryName),s.append("codecountry",t.state.CountryCode),s.append("currency",t.state.Currency),s.append("levels",t.state.levels),null!==t.state.logo&&"string"!==typeof t.state.logo&&s.append("logo",t.state.logo),null!==t.state.slogo&&"string"!==typeof t.state.slogo&&s.append("secondLogo",t.state.slogo),s.append("poptarget",t.state.targetpopulation),s.append("poprate",t.state.growthRate),s.append("havehr",t.state.enableHR),s.append("mainlocation",t.state.mainlocation),s.append("logo2",t.state.logo2),s.append("usingtool",t.state.requiredcapacities),s.append("usingmaintenance",t.state.enableMaintaining),console.log(t.state.country),null!==(a=t.state.user)&&void 0!==a&&a.admin&&Object.keys(t.state.country).length?(s.append("id",t.state.country.id),m.Z.editcountry(s).then((function(e){var l=JSON.parse(localStorage.getItem("country"));localStorage.setItem("country",JSON.stringify(e.data));var a=JSON.parse(localStorage.getItem("country"));if(a.levels>l.levels)for(var s=0;s<a.levels-l.levels;s++){var n={maxpop:0,minpop:0,uppervol:0,undervol:0,m25vol:0,m70vol:0,m25volnew:0,m70volnew:0,uppervolnew:0,undervolnew:0,name:"levels"+(l.levels+s+1),dryvol:0,dryvolnew:0,country:1,parent:l.levels+s-1};m.Z.addlevel(n).then((function(e){console.log(e)})).catch((function(e){console.log(e)}))}t.setState({CountryName:a.country,CountryCode:a.codecountry,Currency:a.currency,levels:a.levels,logo:a.logo,slogo:a.secondLogo,growthRate:a.poprate,targetpopulation:a.poptarget,enableHR:a.havehr,mainlocation:a.mainlocation,requiredcapacities:a.usingtool,enableMaintaining:a.usingmaintenance}),t.alerthandle("Country changed successfully","success"),v.Am.success((0,C.jsx)(x.c,{children:"Country changed successfully"}))})).catch((function(e){t.alerthandle("Country changed unsuccessfully","error"),v.Am.error((0,C.jsx)(x.c,{children:"Country changed unsuccessfully"}))}))):m.Z.addcountry(s).then((function(e){t.alerthandle("Country added successfully","success"),v.Am.success("Country added successfully"),localStorage.setItem("country",JSON.stringify(e.data));for(var l=JSON.parse(localStorage.getItem("country")),a=0;a<l.levels;a++){var s={maxpop:0,minpop:0,uppervol:0,undervol:0,m25vol:0,m70vol:0,m25volnew:0,m70volnew:0,uppervolnew:0,undervolnew:0,name:"levels"+a,dryvol:0,dryvolnew:0,country:1,parent:0===a?null:a-1};m.Z.addlevel(s).then((function(e){console.log(e)})).catch((function(e){console.log(e)}))}t.setState({CountryName:l.country,CountryCode:l.codecountry,Currency:l.currency,levels:l.levels,logo:l.logo,slogo:l.secondLogo,growthRate:l.poprate,targetpopulation:l.poptarget,enableHR:l.havehr,mainlocation:l.mainlocation,requiredcapacities:l.usingtool,enableMaintaining:l.usingmaintenance})})).catch((function(e){t.alerthandle("Country added unsuccessfully","error"),v.Am.error("Country added unsuccessfully")}))}},t.isCountryCodeValid=function(){var e,l,a;return 0===(null===(e=t.state.CountryCode)||void 0===e?void 0:e.length)||!((null===(l=t.state.CountryCode)||void 0===l?void 0:l.length)>3)&&(!((null===(a=t.state.CountryCode)||void 0===a?void 0:a.length)<3)&&!/\d/.test(t.state.CountryCode))},t.isCountryValid=function(){var e;return(null===(e=t.state.CountryName)||void 0===e?void 0:e.length)>1&&!/\d/.test(t.state.CountryName)},t.isCurrencyValid=function(){var e,l;return(null===(e=t.state.Currency)||void 0===e?void 0:e.length)>0&&(null===(l=t.state.Currency)||void 0===l?void 0:l.length)<4&&!/\d/.test(t.state.Currency)},t.handleClosesnack=function(e,l){"clickaway"!==l&&t.setState({snackopen:!1})},t.state={levels:4,validated:!1,CountryName:"",CountryCode:"",Currency:"",logo:null,slogo:null,growthRate:0,mainlocation:"",enableHR:!1,enableMaintaining:!1,targetpopulation:"General population",requiredcapacities:!0,excelData:[],user:JSON.parse(localStorage.getItem("user")),country:JSON.parse(localStorage.getItem("country")),put:!1,snackopen:!1,type:"success",isCountyValid:!1,isCountyCodeValid:!1,isCurrencyValid:!1},t.handleChange=t.handleChange.bind((0,i.Z)(t)),t.handleSubmit=t.handleSubmit.bind((0,i.Z)(t)),t.handleExcelChange=t.handleExcelChange.bind((0,i.Z)(t)),t.isCountryValid=t.isCountryValid.bind((0,i.Z)(t)),t.isCurrencyValid=t.isCurrencyValid.bind((0,i.Z)(t)),t.isCountryCodeValid=t.isCountryCodeValid.bind((0,i.Z)(t)),t.handlemapclick=t.handlemapclick.bind((0,i.Z)(t)),t}return(0,o.Z)(a,[{key:"alerthandle",value:function(e,l){this.setState({content:e,type:l,snackopen:!0})}},{key:"handlemapclick",value:function(e){var l="LatLng("+e.latlng.lat+","+e.latlng.lng+")";this.setState({mainlocation:l})}},{key:"handleExcelChange",value:function(e){var l=this,a=(0,t.Z)(e.target.files,1)[0],s=new FileReader;s.onload=function(e){var a=e.target.result,t=g.ij(a,{type:"binary"}),s=t.SheetNames[0],n=t.Sheets[s],o=g.P6.sheet_to_csv(n,{header:1});l.setState({excelData:o})},s.readAsBinaryString(a)}},{key:"componentDidMount",value:function(){var e=JSON.parse(localStorage.getItem("user")),l=JSON.parse(localStorage.getItem("country"));0!==Object.keys(l).length&&this.setState({CountryName:l.country,CountryCode:l.codecountry,Currency:l.currency,levels:l.levels,logo:l.logo,slogo:l.secondLogo,growthRate:l.poprate,targetpopulation:l.poptarget,enableHR:l.havehr,mainlocation:l.mainlocation,requiredcapacities:l.usingtool,enableMaintaining:l.usingmaintenance,country:l}),this.setState({user:e})}},{key:"render",value:function(){var e,l,a,t,s,n,o,i,r,c,d=this;return(0,C.jsxs)("div",{children:[(0,C.jsx)("div",{className:"page-header",children:(0,C.jsxs)("h1",{className:"page-title",children:[" ",(0,C.jsx)(x.c,{children:"Settings"})," "]})}),(0,C.jsx)("div",{className:"row",children:(0,C.jsx)("div",{className:"col-12 grid-margin",children:(0,C.jsx)("div",{className:"card",children:(0,C.jsxs)("div",{className:"card-body",children:[(0,C.jsx)("h4",{className:"card-title",children:(0,C.jsx)(x.c,{children:"Add country"})}),(0,C.jsxs)(u.Z,{noValidate:!0,validated:this.state.validated,onSubmit:this.handleSubmit,className:"form-sample",children:[(0,C.jsxs)("h3",{className:" card-description text-bold",children:[" ",(0,C.jsx)(x.c,{children:"Country"})," ",(0,C.jsx)(x.c,{children:"info"})]}),(0,C.jsxs)("div",{className:"row",children:[(0,C.jsx)("div",{className:"col-md-6",children:(0,C.jsxs)(u.Z.Group,{className:"row",children:[(0,C.jsx)("label",{className:"col-sm-3 col-form-label control-label control-label",children:(0,C.jsx)(x.c,{children:"Country"})}),(0,C.jsx)("div",{className:"col-sm-9",children:(0,C.jsx)(u.Z.Control,{isValid:this.isCountryValid(),isInvalid:!this.isCountryValid(),value:this.state.CountryName,onChange:function(e){d.setState({CountryName:e.target.value})},required:!0,placeholder:"Example: USA",type:"text"})})]})}),(0,C.jsx)("div",{className:"col-md-6",children:(0,C.jsxs)(u.Z.Group,{className:"row",children:[(0,C.jsxs)("label",{className:"col-sm-3 col-form-label control-label",children:[(0,C.jsx)(x.c,{children:"Country"})," ",(0,C.jsx)(x.c,{children:"code"})]}),(0,C.jsx)("div",{className:"col-sm-9",children:(0,C.jsx)(u.Z.Control,{disabled:!0,required:!0,isInvalid:!this.isCountryCodeValid(),isValid:this.isCountryCodeValid(),value:this.state.CountryCode,onChange:function(e){var l=e.target.value.toString().toUpperCase();d.setState({CountryCode:l})},placeholder:"Example: ABC",type:"text"})})]})})]}),(0,C.jsxs)("div",{className:"row",children:[(0,C.jsx)("div",{className:"col-md-6",children:(0,C.jsxs)(u.Z.Group,{className:"row",children:[(0,C.jsx)("label",{className:"col-sm-3 col-form-label control-label",children:(0,C.jsx)(x.c,{children:"Currency"})}),(0,C.jsx)("div",{className:"col-sm-9",children:(0,C.jsx)("div",{className:"input-group",children:(0,C.jsx)(u.Z.Control,{required:!0,disabled:!(null!==(e=this.state.user)&&void 0!==e&&e.admin),isInvalid:!this.isCurrencyValid(),isValid:this.isCurrencyValid(),value:this.state.Currency,onChange:function(e){d.setState({Currency:e.target.value})},placeholder:"Example: $",type:"text",className:"form-control","aria-label":"Amount (to the nearest dollar)"})})})]})}),(0,C.jsx)("div",{className:"col-md-6",children:(0,C.jsxs)(u.Z.Group,{className:"row",children:[(0,C.jsx)("label",{className:"col-sm-3 col-form-label control-label",children:(0,C.jsx)(x.c,{children:"Allowed levels"})}),(0,C.jsxs)("div",{style:{marginTop:"2.5%"},className:"col-sm-9 ",children:[(0,C.jsx)(u.Z.Control,{disabled:!(null!==(l=this.state.user)&&void 0!==l&&l.admin),required:!0,onChange:function(e){d.setState({levels:e.target.value})},type:"range",min:"1",max:"8",step:"1",value:this.state.levels}),(0,C.jsxs)("label",{className:"col-sm-3 col-form-label  ",children:[(0,C.jsx)(x.c,{children:"Value:"})," ",this.state.levels," "]})]})]})})]}),(0,C.jsxs)("div",{className:"row",children:[(0,C.jsx)("div",{className:"col-md-6",children:(0,C.jsxs)(u.Z.Group,{className:"row",children:[(0,C.jsx)("label",{className:"col-sm-3 col-form-label ",children:(0,C.jsx)(x.c,{children:"Logo 1: jpg.jpeg.png, aspect ration 16:4"})}),(0,C.jsx)("div",{className:"col-sm-9 mt-3",children:(0,C.jsxs)("div",{className:"custom-file ",children:[(0,C.jsx)(u.Z.Control,{onChange:function(e){d.setState({logo:e.target.files[0]})},disabled:!(null!==(a=this.state.user)&&void 0!==a&&a.admin),type:"file",className:"form-control visibility-hidden",id:"customFileLang",lang:"es",accept:"image/png, image/jpeg, image/jpg"}),(0,C.jsxs)("label",{className:"custom-file-label",htmlFor:"customFileLang",children:[null!==this.state.logo?this.state.logo.name:"Upload image","string"===typeof this.state.logo?this.state.logo.split("/")[2]:""]})]})})]})}),(0,C.jsx)("div",{className:"col-md-6",children:(0,C.jsxs)(u.Z.Group,{className:"row",children:[(0,C.jsx)("label",{className:"col-sm-3 col-form-label ",children:(0,C.jsx)(x.c,{children:"Logo 2: jpg.jpeg.png, aspect ration 1:1"})}),(0,C.jsx)("div",{className:"col-sm-9 mt-3",children:(0,C.jsxs)("div",{className:"custom-file ",children:[(0,C.jsx)(u.Z.Control,{onChange:function(e){d.setState({slogo:e.target.files[0]})},disabled:!(null!==(t=this.state.user)&&void 0!==t&&t.admin),type:"file",className:"form-control visibility-hidden",id:"customFileLang1",lang:"es",accept:"image/png, image/jpeg, image/jpg"}),(0,C.jsxs)("label",{className:"custom-file-label",htmlFor:"customFileLang1",children:[null!==this.state.slogo?this.state.slogo.name:"Upload image","string"===typeof this.state.slogo?this.state.slogo.split("/")[2]:""]})]})})]})})]}),(0,C.jsx)("div",{className:"row",children:(0,C.jsx)("div",{className:"col-md-6 ",children:(0,C.jsxs)(u.Z.Group,{className:" row  ",children:[(0,C.jsx)("label",{className:"col-sm-3 col-form-label control-label",children:(0,C.jsx)(x.c,{children:"Annual population growth rate (%)"})}),(0,C.jsx)("div",{className:"col-sm-9",children:(0,C.jsxs)("div",{className:"input-group ",children:[(0,C.jsx)(u.Z.Control,{disabled:!(null!==(s=this.state.user)&&void 0!==s&&s.admin),required:!0,isValid:!0,value:this.state.growthRate,onChange:function(e){var l=e.target.value;if(l.split(".").length>1){var a=l.split(".")[0],t=l.split(".")[1].slice(0,2);l=a+"."+t}d.setState({growthRate:parseFloat(l)})},type:"number",className:"form-control","aria-label":"Amount (to the nearest dollar)"}),(0,C.jsx)("div",{className:"input-group-append h-75 pb-3",children:(0,C.jsx)("span",{className:"input-group-text",children:"%"})})]})})]})})}),(0,C.jsxs)("div",{className:"row",children:[(0,C.jsx)("div",{className:"col-md-6",children:(0,C.jsxs)(u.Z.Group,{className:"row",children:[(0,C.jsx)("label",{className:"col-sm-5 col-form-label",children:(0,C.jsx)(x.c,{children:"Enable HR data"})}),(0,C.jsx)("div",{className:"col-sm-7",children:(0,C.jsx)(u.Z.Check,{disabled:!(null!==(n=this.state.user)&&void 0!==n&&n.admin),checked:this.state.enableHR,value:this.state.enableHR,onChange:function(e){d.setState({enableHR:!d.state.enableHR})},type:"switch",label:"",id:"disabled-custom-switch"})})]})}),(0,C.jsx)("div",{className:"col-md-6",children:(0,C.jsxs)(u.Z.Group,{className:"row",children:[(0,C.jsx)("label",{className:"col-sm-5 col-form-label",children:(0,C.jsx)(x.c,{children:"Enable maintenance functions"})}),(0,C.jsx)("div",{className:"col-sm-7",children:(0,C.jsx)(u.Z.Check,{checked:this.state.enableMaintaining,disabled:!(null!==(o=this.state.user)&&void 0!==o&&o.admin),onChange:function(e){d.setState({enableMaintaining:!d.state.enableMaintaining})},type:"switch",label:"",id:"disabled-custom"})})]})})]}),(0,C.jsxs)("div",{className:"row",children:[(0,C.jsx)("div",{className:"col-md-6",children:(0,C.jsxs)(u.Z.Group,{className:"row",children:[(0,C.jsx)("label",{className:"col-sm-3 col-form-label control-label",children:(0,C.jsx)(x.c,{children:"Target populations:"})}),(0,C.jsx)("div",{className:"col-sm-9",children:(0,C.jsxs)(u.Z.Control,{required:!0,disabled:!(null!==(i=this.state.user)&&void 0!==i&&i.admin),onChange:function(e){d.setState({targetpopulation:e.target.value})},value:this.state.targetpopulation,className:"form-select",as:"select",children:[(0,C.jsx)(j.W,{children:function(e,l){l.i18n;return(0,C.jsx)("option",{value:"General population",children:e("General populations")})}}),(0,C.jsx)(j.W,{children:function(e,l){l.i18n;return(0,C.jsx)("option",{value:"Under-1 Population",children:e("Under-1 populations")})}})]})})]})}),(0,C.jsx)("div",{className:"col-md-6",children:(0,C.jsxs)(u.Z.Group,{className:"row",children:[(0,C.jsx)("label",{className:"col-sm-3 col-form-label control-label",children:(0,C.jsx)(x.c,{children:"Required capacity"})}),(0,C.jsx)("div",{className:"col-sm-9",children:(0,C.jsxs)(u.Z.Control,{required:!0,disabled:!(null!==(r=this.state.user)&&void 0!==r&&r.admin),onChange:function(e){var l="true"===e.target.value;d.setState({requiredcapacities:l})},value:this.state.requiredcapacities,className:"form-select",as:"select",children:[(0,C.jsx)(j.W,{children:function(e,l){l.i18n;return(0,C.jsx)("option",{value:!0,children:e("Import from Assistant Tool (in MS Excel)")},"Estimate required capacity (in MS Excel)")}}),(0,C.jsx)(j.W,{children:function(e,l){l.i18n;return(0,C.jsx)("option",{value:!1,children:e("Enter manually")})}})]})})]})})]}),(0,C.jsxs)(u.Z.Group,{className:"row",children:[(0,C.jsxs)("div",{className:"col-md-6",children:[(0,C.jsx)("label",{className:"col-sm-3 col-form-label ",children:(0,C.jsx)(x.c,{children:"Main location"})}),(0,C.jsx)("div",{className:"map",children:(0,C.jsx)(y.Z,{loca:this.state.mainlocation,handleChange:this.handlemapclick})})]}),(0,C.jsx)("div",{className:"col-md-6",children:(0,C.jsx)(u.Z.Group,{className:"mt-5",children:(0,C.jsx)("div",{className:"col-sm-12",children:(0,C.jsx)(u.Z.Control,{disabled:!0,value:this.state.mainlocation,onChange:function(e){d.setState({mainlocation:e.target.value})},type:"text"})})})})]}),this.state.country!==[]&&void 0!==this.state.country&&null!==(c=this.state.user)&&void 0!==c&&c.admin?(0,C.jsx)("button",{type:"submit",className:"btn w-25 btn-primary mr-2",children:(0,C.jsx)(x.c,{children:"Save"})}):(0,C.jsx)("button",{type:"submit",disabled:!0,className:"btn w-25 btn-primary mr-2",children:(0,C.jsx)(x.c,{children:"Save"})})]})]})})})})]})}}]),a}(d.Component),f=b}}]);
//# sourceMappingURL=3780.1105ee4b.chunk.js.map