"use strict";(self.webpackChunkinventory=self.webpackChunkinventory||[]).push([[3299],{63299:function(e,t,n){n.r(t),n.d(t,{default:function(){return X}});var a=n(72791),r=n(29439),s=(n(59391),n(15671)),i=n(43144),l=n(60136),c=n(54062),d=function(e){(0,l.Z)(n,e);var t=(0,c.Z)(n);function n(){var e;(0,s.Z)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={valuesIndex:0},e}return(0,i.Z)(n,[{key:"componentDidMount",value:function(){var e=this;setTimeout((function(){e.setState({valuesIndex:(e.state.valuesIndex+1)%e.props.values.length})}),this.props.interval)}},{key:"render",value:function(){return this.props.children(this.props.values[this.state.valuesIndex])}}]),n}(a.Component);d.defaultProps={interval:1e3};var o=n(80184),u="ChartDropDown_drop__3zt0I",h=function(e){return(0,o.jsx)("div",{className:u,children:(0,o.jsxs)("select",{onChange:e.onChange,children:[(0,o.jsx)("option",{value:"",children:"Select Item Class"}),e.options.map((function(e,t){return(0,o.jsx)("option",{value:e.id,children:e.op},t)}))]})})},p="Facilities_facilities__joa8-",x="Card_card__Bhi4l",f=function(e){return(0,o.jsx)("div",{className:x,children:e.children})},m=n(1413),v=n(74165),g=n(15861);function j(e,t){return"SEND"===t.type?{data:null,error:null,status:"pending"}:"SUCCESS"===t.type?{data:t.responseData,error:null,status:"completed"}:"ERROR"===t.type?{data:null,error:t.errorMessage,status:"completed"}:e}var b=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=(0,a.useReducer)(j,{status:t?"pending":null,data:null,error:null}),s=(0,r.Z)(n,2),i=s[0],l=s[1],c=(0,a.useCallback)(function(){var t=(0,g.Z)((0,v.Z)().mark((function t(n){var a;return(0,v.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return l({type:"SEND"}),t.prev=1,t.next=4,e(n);case 4:a=t.sent,l({type:"SUCCESS",responseData:a}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),l({type:"ERROR",errorMessage:t.t0.message||"Something went wrong!"});case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}(),[e]);return(0,m.Z)({sendRequest:c},i)},y=n(10140);function Z(){return N.apply(this,arguments)}function N(){return(N=(0,g.Z)((0,v.Z)().mark((function e(){var t;return(0,v.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.Z.getAllDashboardItems();case 3:return t=e.sent,e.abrupt("return",t.data);case 7:throw e.prev=7,e.t0=e.catch(0),new Error("Error fetching data from back-end "+e.t0.message);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function w(){return _.apply(this,arguments)}function _(){return(_=(0,g.Z)((0,v.Z)().mark((function e(){var t;return(0,v.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.Z.getAllFacilities();case 3:return t=e.sent,e.abrupt("return",t.data);case 7:throw e.prev=7,e.t0=e.catch(0),new Error("Error fetching data from back-end "+e.t0.message);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function k(){return D.apply(this,arguments)}function D(){return(D=(0,g.Z)((0,v.Z)().mark((function e(){var t;return(0,v.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.Z.getAllTablesData();case 3:return t=e.sent,e.abrupt("return",t.data);case 7:throw e.prev=7,e.t0=e.catch(0),new Error("Error fetching data from back-end "+e.t0.message);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}var C=n(65218),E=n(59909),S=n(31457),F=function(){var e=(0,a.useState)([]),t=(0,r.Z)(e,2),n=t[0],s=t[1],i=(0,a.useState)({defined:0,subFacilities:0}),l=(0,r.Z)(i,2),c=l[0],d=l[1],u=b(w),x=u.sendRequest,m=u.status,v=u.data,g=u.error;if((0,a.useEffect)((function(){x()}),[]),"pending"===m)return(0,o.jsx)(E.Z,{});if(g)return C.ZP.error("There was a problem loading data"),(0,o.jsx)("p",{children:g});if("completed"===m&&0===n.length){console.log("completed"),console.log(v);var j=[];v.map((function(e,t){j.push({op:e.name,id:t,facility:e})})),s(j)}return(0,o.jsx)("div",{className:p,children:(0,o.jsxs)(f,{children:[(0,o.jsx)("h3",{children:"\ud83c\udfe2 Facilities "}),(0,o.jsx)(h,{onChange:function(e){e.preventDefault(),console.log(n),n.map((function(t){t.id===+e.target.value&&d({defined:t.facility.defined,subFacilities:t.facility.sub_fac})}))},options:n}),(0,o.jsx)(S.Z,{id:"gauge-chart6",animate:!0,nrOfLevels:10,percent:c.defined,needleColor:"#345243",colors:["#EA4228","#F5CD19","#5BE12C"],textColor:"#000000",animDelay:100}),(0,o.jsx)("span",{children:c.subFacilities}),(0,o.jsx)("p",{children:" Subset Facilities "})]})})},I="ItemCard_item__XSGC1",A=function(){var e=(0,a.useState)([]),t=(0,r.Z)(e,2),n=t[0],s=t[1],i=(0,a.useState)([]),l=(0,r.Z)(i,2),c=l[0],d=l[1],u=(0,a.useState)({workings:0,totalItems:0}),p=(0,r.Z)(u,2),x=p[0],m=p[1],v=b(Z),g=v.sendRequest,j=v.status,y=v.data,N=v.error;if((0,a.useEffect)((function(){g()}),[]),"pending"===j)return(0,o.jsx)("div",{className:"centered",children:(0,o.jsx)(E.Z,{})});if(N)return C.ZP.error("There was a problem loading data"),(0,o.jsx)("p",{children:N});if("completed"===j&&0===n.length){var w=[];y.map((function(e,t){w.push({op:e.item_class,id:t})})),s(w),w=[]}return(0,o.jsx)("div",{className:I,children:(0,o.jsxs)(f,{children:[(0,o.jsx)("h3",{children:"\ud83c\udfe2 Items "}),(0,o.jsx)(h,{onChange:function(e){e.preventDefault();var t=[],n=e.target.value;y.map((function(e,a){a===+n&&e.items.map((function(e,n){t.push({id:n,classId:a,op:e.item_type,working:e.working,totalItems:e.total_items})}))})),d(t)},options:n}),(0,o.jsx)(h,{onChange:function(e){var t=e.target.value;c.map((function(e){e.id===+t&&m({working:e.working,totalItems:e.totalItems})}))},options:c}),(0,o.jsx)(S.Z,{className:"pt-3",id:"gauge-chart6",animate:!0,nrOfLevels:10,percent:x.working||0,needleColor:"#345243",colors:["#EA4228","#F5CD19","#5BE12C"],textColor:"#000000",animDelay:100}),(0,o.jsx)("span",{children:x.totalItems}),(0,o.jsx)("p",{children:"Items"})]})})},R=n(91523),O=function(e){return(0,o.jsxs)("div",{className:"d-flex mb-3",children:[(0,o.jsx)("div",{children:(0,o.jsxs)("p",{className:"activity-info bg-warning",style:{color:"#000000"},children:[" ","\u26a0"," "]})}),(0,o.jsx)("div",{className:"activity-details",children:(0,o.jsxs)(R.rU,{className:"p-0 btn btn-link btn-fw text-muted ",style:{fontSize:"16px",textDecorationColor:"#777"},to:"dashboard/warnings-info/"+e.param,children:["  (".concat(e.count,")  "),e.title,(0,o.jsx)("label",{className:"badge badge-danger opacity-".concat(e.badgeOp," "),style:{fontSize:"12px"},children:e.badge}),e.maxExtended&&(0,o.jsxs)("label",{className:"badge badge-warning  ",style:{fontSize:"12px"},children:[" ",e.maxExtended," days extended"]})]})})]})},T="Warnings_warnings__73LHj",z=n(91933),L=[{title:"Maintenance services must be done in   ",badge:"7 Days"},{title:"Maintenance services must be done in   ",badge:"3 Days"},{title:"Maintenance  services were ",badge:"not performed on time"}],M=function(){var e=(0,z.useQuery)(["warnings"],(0,g.Z)((0,v.Z)().mark((function e(){var t;return(0,v.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.Z.getAllWarningsData();case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)}))),{refetchOnMount:!0}),t=e.data;return e.isLoading||0===t.length?null:(console.log(t),(0,o.jsxs)("div",{className:"card-body recent-activity ".concat(T),children:[(0,o.jsx)("h4",{className:"card-title",children:" Warnings"}),(0,o.jsx)("p",{className:"card-description",children:"Warnings that need to be taken cared of"}),t&&(0,o.jsxs)("div",{className:"activities",children:[(0,o.jsx)(O,{title:L[0].title,text:L[0].text,badge:L[0].badge,count:t.seven_days,badgeOp:50,param:"day=7"}),(0,o.jsx)(O,{title:L[1].title,text:L[1].text,badge:L[1].badge,count:t.three_days,badgeOp:75,param:"day=3"}),(0,o.jsx)(O,{title:L[2].title,text:L[2].text,badge:L[2].badge,count:t.extended.count,maxExtended:t.extended.maxExtended,badgeOp:100,param:"day=extended"})]})]}))},W="Dashbord_charts__aHm0k",q="Dashbord_warning__DSWyr",U="DashboardTables_levels__KWMUa",B="DashboardTables_sub-facilities__YkEFi",P=n(3593),H=function(e){var t=e.updatedOn.split("T")[0].replace(/-/g," / ");return(0,o.jsxs)("tr",{children:[(0,o.jsxs)("td",{children:[" ",e.num," "]},"E"),(0,o.jsx)("td",{className:"py-1",children:e.name},"F"),(0,o.jsx)("td",{children:(0,o.jsxs)("label",{className:"badge badge-info",children:[" ",e.level," "]})},"G"),(0,o.jsx)("td",{className:"py-1",children:" ".concat(e.levelName)},"Z"),(0,o.jsx)("td",{children:(0,o.jsx)(P.Z,{variant:e.variant,now:e.registered})},"H"),(0,o.jsxs)("td",{children:[" ",t," "]},"J")]})},G=function(e){return(0,o.jsxs)(f,{children:[(0,o.jsx)("h4",{className:"card-title",children:" Sub Facilities"}),(0,o.jsxs)("p",{className:"card-description",children:[" ","list of all sub facilities contained in the organizaion"," "]}),(0,o.jsx)("div",{className:"table-responsive",children:(0,o.jsxs)("table",{className:"table table-striped",children:[(0,o.jsx)("thead",{children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{children:" # "}),(0,o.jsx)("th",{children:" Facility Name "}),(0,o.jsx)("th",{children:" Level "}),(0,o.jsx)("th",{children:" Level name "}),(0,o.jsx)("th",{children:" Registered "}),(0,o.jsx)("th",{children:" Last Update "})]})}),(0,o.jsx)("tbody",{children:function(){for(var t=[],n=0;n<e.data.length;n++){var a=n%2===0?"success":"warning";t.push((0,o.jsx)(H,{num:e.data[n].id,name:e.data[n].name,level:e.data[n].level_id,levelName:e.data[n].level_name,registered:100*+e.data[n].defined,updatedOn:e.data[n].update,variant:a},n+1))}return t}()})]})})]})},J=function(e){return console.log(e._key),(0,o.jsxs)("tr",{children:[(0,o.jsxs)("td",{children:[(0,o.jsxs)("label",{className:"badge badge-info",children:[" ",e.level," "]})," "]},"A"),(0,o.jsx)("td",{children:e.levelName},"B"),(0,o.jsx)("td",{children:e.facilitiesNum},"C"),(0,o.jsx)("td",{children:e.subFacilitiesNum},"D"),(0,o.jsx)("td",{children:e.defSubFacilitiesNum},"E")]})},K=function(e){return console.log("here"),console.log(e.data),(0,o.jsxs)("div",{children:[(0,o.jsx)("h4",{className:"card-title",children:" \ud83c\udfe2 Facilities"}),(0,o.jsx)("p",{className:"card-description",children:" Facilities owned separated by levels"}),(0,o.jsx)("div",{className:"table-responsive",children:(0,o.jsxs)("table",{className:"table",children:[(0,o.jsx)("thead",{children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{children:"Level"}),(0,o.jsx)("th",{children:"Level Name"}),(0,o.jsx)("th",{children:"Total number of facilities"}),(0,o.jsx)("th",{children:"Total number of sub-facilities"}),(0,o.jsx)("th",{children:"Number of Defined sub-level facilities"})]})}),(0,o.jsx)("tbody",{children:e.data.map((function(e,t){return(0,o.jsx)(J,{level:e.level_id,levelName:e.level_name,facilitiesNum:e.total,subFacilitiesNum:e.sub,defSubFacilitiesNum:e.def},t)}))})]})})]})},Q=function(){var e=b(k),t=e.sendRequest,n=e.status,s=e.data,i=e.error,l=(0,a.useState)(!1),c=(0,r.Z)(l,2),d=c[0],u=c[1];return(0,a.useEffect)((function(){t()}),[]),"pending"===n?(0,o.jsx)(E.Z,{}):(console.log("error object",i),i?(C.ZP.error("There was a problem loading data"),(0,o.jsx)("p",{children:i})):("completed"!==n||d||u(!0),(0,o.jsxs)(a.Fragment,{children:[(0,o.jsx)("section",{className:U,children:d&&(0,o.jsx)(K,{data:s.level_table})}),(0,o.jsx)("section",{className:B,children:d&&(0,o.jsx)(G,{data:s.facility_table})})]})))},X=function(){return(0,o.jsxs)("main",{children:[(0,o.jsxs)("section",{className:W,children:[(0,o.jsx)(A,{}),(0,o.jsx)(F,{})]}),(0,o.jsx)("section",{className:q,children:(0,o.jsx)(M,{})}),(0,o.jsx)(Q,{})]})}},10140:function(e,t,n){var a=n(15671),r=n(43144),s=n(39877),i=n(54318),l="http://5.182.47.38:8001/dashboard",c=function(){function e(){(0,a.Z)(this,e)}return(0,r.Z)(e,[{key:"getAllDashboardItems",value:function(){return s.Z.get(l+"/item",{headers:{Authorization:(0,i.Z)()}})}},{key:"getAllFacilities",value:function(){return s.Z.get(l+"/facility",{headers:{Authorization:(0,i.Z)()}})}},{key:"getAllTablesData",value:function(){return s.Z.get(l+"/table",{headers:{Authorization:(0,i.Z)()}})}},{key:"getAllWarningsData",value:function(){return s.Z.get(l+"/maintenance",{headers:{Authorization:(0,i.Z)()}})}},{key:"getWarningsInfo",value:function(e){return console.log("Now requesting to "+l+"/maintenance"+e),s.Z.get(l+"/todo"+e,{headers:{Authorization:(0,i.Z)()}})}}]),e}();t.Z=new c}}]);
//# sourceMappingURL=3299.9b18ceae.chunk.js.map