{"version":3,"file":"static/js/2346.8ce77df3.chunk.js","mappings":"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","sources":["app/items/ItemList.js","app/shared/EditIcon.js","app/shared/SharedTable.js","app/shared/TrashIcon.js"],"sourcesContent":["import React from \"react\";\nimport {\n  TableBody,\n  TableCell,\n  TableHead,\n  TableRow,\n  Tooltip,\n} from \"@mui/material\";\nimport \"../styles/table.scss\";\nimport Spinner from \"../shared/Spinner\";\nimport { useMutation, useQuery } from \"react-query\";\nimport SharedTable from \"../shared/SharedTable\";\nimport EditIcon from \"../shared/EditIcon\";\nimport { Link, useHistory } from \"react-router-dom\";\nimport ItemService from \"../services/item.service\";\nimport { Trans } from \"react-i18next\";\nimport TrashIcon from \"../shared/TrashIcon\";\nimport Modal from \"react-bootstrap/Modal\";\n\nfunction ItemList() {\n  const history = useHistory();\n  const params = new URLSearchParams(history.location.search);\n  const facility = params.get(\"facility\");\nconst [openModal, setOpenModal] = React.useState(false);\nconst [itemId, setItemId] = React.useState(null);\nconst [resons, setResons] = React.useState([]);\nconst [reasonsLoding, setReasonsLoding] = React.useState(false);\nconst [reason, setReason] = React.useState(\"\");\nconst [is_deleted, setIsDeleted] = React.useState(false);\n  const {\n    data: items,\n    isLoading: isItemsDefaultLoading,\n    refetch: refetchItems,\n  } = useQuery(\n    [\"item-default-value\", facility],\n    async () => {\n      const res = await ItemService.getItems(undefined, facility,is_deleted);\n      return res.data;\n    },\n    {\n      refetchOnMount: true,\n    }\n  );\n\n  const { data: itemClassesAndTypes, isLoading: isItemClassesAndTypesLoading } =\n    useQuery(\n      [\"item-classes-and-types\"],\n      async () => {\n        const res = await ItemService.getItemClassesAndTypes();\n        return res.data.data.filter((item) => item.item_type.length > 0);\n      },\n      {\n        refetchOnMount: true,\n      }\n    );\n\n  const { isLoading: isDeleteLoading, mutateAsync: deleteItem } = useMutation({\n    mutationFn: async (id) => {\n      const res = await ItemService.deleteItem(id);\n      return res;\n    },\n    onSuccess() {\n      refetchItems();\n    },\n  });\n\n  const convertDate = (date) => {\n    return new Date(date).toISOString().split(\"T\")[0];\n  };\n\n  if (isItemsDefaultLoading || isItemClassesAndTypesLoading) {\n    return <Spinner />;\n  }\n const openDeleteModal = (id) => {\n   setReasonsLoding(true);\n   ItemService.deleteitemparam(id).then((res) => {\n     setResons(res.data);\n     setReasonsLoding(false);\n   });\n\n   setItemId(id);\n   setOpenModal(true);\n   setReasonsLoding(false);\n };\n const handledeletChange =()=>{\n    setIsDeleted(!is_deleted)\n }\n const deletefac = () => {\n   const data = {\n     id: itemId,\n     delete_reason: reason,\n     isDel: true,\n   };\n   const res = ItemService.deleteitem(data);\n   setOpenModal(false);\n   refetchItems();\n };\n if (reasonsLoding) {\n   return <Spinner />;\n }\n  return (\n    <div>\n      <h3 className=\"page-title mb-3\">\n        <Trans>Item list</Trans>\n      </h3>\n      <div className=\"mt-3\">\n        <label className=\"mr-2 mb-1\"> Deleted </label>\n        <input\n          type=\"checkbox\"\n          checked={is_deleted}\n          onChange={handledeletChange}\n          className=\"mt-1\"\n        />\n\n        <button\n          className=\"btn btn-success text-dark w-25  mb-2   \"\n          onClick={() => refetchItems()}\n          style={{ marginLeft: \"5%\" }}\n          type=\"submit\"\n        >\n          <Trans>filter</Trans>\n        </button>\n        <div className=\"card\">\n          <div className=\"card-body\">\n            <div className=\"mt-5 table-container\">\n              <SharedTable>\n                <TableHead>\n                  <TableRow>\n                    <TableCell className=\"col-sm-2\">\n                      <Trans>Item class</Trans>\n                    </TableCell>\n                    <TableCell className=\"col-sm-2\">\n                      <Trans>Item category</Trans>\n                    </TableCell>\n                    <TableCell className=\"col-sm-2\">\n                      <Trans>Code</Trans>\n                    </TableCell>\n                    <TableCell className=\"col-sm-2\">\n                      <Trans>Manufacturer</Trans>\n                    </TableCell>\n                    <TableCell className=\"col-sm-2\">\n                      <Trans>Last Changes On</Trans>\n                    </TableCell>\n                    <TableCell className=\"col-sm-2\">\n                      <Trans>Edit</Trans>\n                    </TableCell>\n                  </TableRow>\n                </TableHead>\n                <TableBody>\n                  {items?.map((item) => {\n                    const itemClass = itemClassesAndTypes?.find(\n                      (itemC) => itemC.item_class.id === item.item_class\n                    );\n                    const itemType = itemClass?.item_type.find(\n                      (itemT) => itemT.id === item.item_type\n                    );\n                    return (\n                      <TableRow key={item.id}>\n                        <TableCell className=\"col-sm-2\">\n                          {itemClass?.item_class.title ?? \"-\"}\n                        </TableCell>\n                        <TableCell className=\"col-sm-2\">\n                          {itemType?.title ?? \"-\"}\n                        </TableCell>\n                        <TableCell className=\"col-sm-2\">\n                          {item.code ?? \"-\"}\n                        </TableCell>\n                        <TableCell className=\"col-sm-2\">\n                          {item.Manufacturer ?? \"-\"}\n                        </TableCell>\n                        <TableCell className=\"col-sm-2\">\n                          {item?.updated_at\n                            ? convertDate(item.updated_at)\n                            : \"-\"}\n                        </TableCell>\n                        <TableCell className=\"col-sm-2\">\n                          <Link to={`/items/info/${item.id}`}>\n                            <div style={{ width: \"20px\", height: \"20px\" }}>\n                              <EditIcon />\n                            </div>\n                          </Link>\n                          <Tooltip title=\"Delete item\">\n                            <button\n                              className=\"edit-btn\"\n                              disabled={isDeleteLoading}\n                              onClick={() => openDeleteModal(item.id)}\n                            >\n                              <TrashIcon />\n                            </button>\n                          </Tooltip>\n                        </TableCell>\n                      </TableRow>\n                    );\n                  })}\n                </TableBody>\n              </SharedTable>\n              <Modal show={openModal} onHide={() => setOpenModal(false)}>\n                <form onSubmit={deletefac}>\n                  <h1\n                    className=\"mb-1 mr-3  mt-5 mb-5 text-black\"\n                    style={{ marginLeft: \"33%\" }}\n                  >\n                    <Trans>Delete Item</Trans>\n                  </h1>\n                  <div className=\"d-flex flex-column align-items-center\"></div>\n                  <div className=\"d-flex flex-column align-items-center\"></div>\n                  <div className=\"d-flex flex-column align-items-center\"></div>\n                  <div className=\"d-flex flex-column align-items-center\"></div>\n\n                  <div className=\"d-flex flex-column align-items-center w-100\">\n                    <label>\n                      <Trans>Delete reasons</Trans>\n                    </label>\n                    <select\n                      name=\"Delete reasons\"\n                      onChange={(event) => {\n                        setReason(event.target.value);\n                      }}\n                      // value={editFormData?.facility}\n                    >\n                      <option value=\"-1\" selected disabled>\n                        Please select\n                      </option>\n                      {resons?.map((item, index) => (\n                        <option key={item.id} value={item.id}>\n                          {item.name}\n                        </option>\n                      ))}\n                    </select>\n                  </div>\n\n                  <button\n                    className=\"btn btn-success text-dark w-50 mt-4 mb-2   \"\n                    style={{ marginLeft: \"24%\" }}\n                    type=\"submit\"\n                  >\n                    <Trans>Delete</Trans>\n                  </button>\n                  <button\n                    className=\"btn btn-danger text-dark w-50 mt-4 mb-2   \"\n                    style={{ marginLeft: \"24%\" }}\n                    onClick={(e) => {\n                      e.preventDefault();\n                      e.stopPropagation();\n                      setOpenModal(false);\n                    }}\n                  >\n                    <Trans>Cancel</Trans>\n                  </button>\n                </form>\n              </Modal>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default ItemList;\n","function EditIcon() {\n  return (\n    <>\n      <svg\n        version=\"1.1\"\n        xmlns=\"http://www.w3.org/2000/svg\"\n        viewBox=\"0 0 512 512\"\n        width=\"20\"\n        height=\"20\"\n        xmlnsXlink=\"http://www.w3.org/1999/xlink\"\n        enable-background=\"new 0 0 512 512\"\n      >\n        <path d=\"m455.1,137.9l-32.4,32.4-81-81.1 32.4-32.4c6.6-6.6 18.1-6.6 24.7,0l56.3,56.4c6.8,6.8 6.8,17.9 0,24.7zm-270.7,271l-81-81.1 209.4-209.7 81,81.1-209.4,209.7zm-99.7-42l60.6,60.7-84.4,23.8 23.8-84.5zm399.3-282.6l-56.3-56.4c-11-11-50.7-31.8-82.4,0l-285.3,285.5c-2.5,2.5-4.3,5.5-5.2,8.9l-43,153.1c-2,7.1 0.1,14.7 5.2,20 5.2,5.3 15.6,6.2 20,5.2l153-43.1c3.4-0.9 6.4-2.7 8.9-5.2l285.1-285.5c22.7-22.7 22.7-59.7 0-82.5z\" />\n      </svg>\n    </>\n  );\n}\n\nexport default EditIcon;\n","import { Table, TableContainer } from \"@mui/material\";\n\nfunction SharedTable({ children }) {\n  return (\n    <>\n      <TableContainer>\n        <Table>{children}</Table>\n      </TableContainer>\n    </>\n  );\n}\n\nexport default SharedTable;\n","function TrashIcon() {\n  return (\n    <svg\n      version=\"1.1\"\n      id=\"Layer_1\"\n      x=\"0px\"\n      y=\"0px\"\n      width=\"20px\"\n      height=\"20px\"\n      viewBox=\"0 0 473 473\"\n    >\n      <path\n        d=\"M324.285,215.015V128h20V38h-98.384V0H132.669v38H34.285v90h20v305h161.523c23.578,24.635,56.766,40,93.477,40\n\t\tc71.368,0,129.43-58.062,129.43-129.43C438.715,277.276,388.612,222.474,324.285,215.015z M294.285,215.015\n\t\tc-18.052,2.093-34.982,7.911-50,16.669V128h50V215.015z M162.669,30h53.232v8h-53.232V30z M64.285,68h250v30h-250V68z M84.285,128\n\t\th50v275h-50V128z M164.285,403V128h50v127.768c-21.356,23.089-34.429,53.946-34.429,87.802c0,21.411,5.231,41.622,14.475,59.43\n\t\tH164.285z M309.285,443c-54.826,0-99.429-44.604-99.429-99.43s44.604-99.429,99.429-99.429s99.43,44.604,99.43,99.429\n\t\tS364.111,443,309.285,443z\"\n      />\n      <polygon\n        points=\"342.248,289.395 309.285,322.358 276.323,289.395 255.11,310.608 288.073,343.571 255.11,376.533 276.323,397.746 \n\t\t309.285,364.783 342.248,397.746 363.461,376.533 330.498,343.571 363.461,310.608 \t\"\n      />\n    </svg>\n  );\n}\n\nexport default TrashIcon;\n"],"names":["history","useHistory","facility","URLSearchParams","location","search","get","React","openModal","setOpenModal","itemId","setItemId","resons","setResons","reasonsLoding","setReasonsLoding","reason","setReason","is_deleted","setIsDeleted","useQuery","ItemService","undefined","res","data","refetchOnMount","items","isItemsDefaultLoading","isLoading","refetchItems","refetch","filter","item","item_type","length","itemClassesAndTypes","isItemClassesAndTypesLoading","useMutation","mutationFn","id","onSuccess","isDeleteLoading","mutateAsync","className","type","checked","onChange","onClick","style","marginLeft","map","date","itemClass","find","itemC","item_class","itemType","itemT","title","code","Manufacturer","updated_at","Date","toISOString","split","to","width","height","disabled","then","show","onHide","onSubmit","delete_reason","isDel","name","event","target","value","selected","index","e","preventDefault","stopPropagation","version","xmlns","viewBox","xmlnsXlink","d","children","x","y","points"],"sourceRoot":""}