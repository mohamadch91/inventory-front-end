"use strict";(self.webpackChunkinventory=self.webpackChunkinventory||[]).push([[798],{5596:function(e,t,a){a.d(t,{Z:function(){return c}});var l=a(5671),s=a(3144),n=a(4569),o=a.n(n);function r(){var e=JSON.parse(localStorage.getItem("user"));return e&&e.access?"Bearer "+e.access:{}}var i="http://5.182.47.38:8001/settings/",c=new(function(){function e(){(0,l.Z)(this,e)}return(0,s.Z)(e,[{key:"getPublicContent",value:function(){return o().get(i+"all")}},{key:"addcountry",value:function(e){return console.log(e),o().post(i+"country/",e,{headers:{Authorization:r()}})}},{key:"editcountry",value:function(e){return console.log(e),o().put(i+"country/",e,{headers:{Authorization:r(),"Content-Type":"multipart/form-data"}})}},{key:"addlevel",value:function(e){return o().post(i+"level",e,{headers:{Authorization:r()}})}},{key:"getLevels",value:function(){return o().get(i+"level",{headers:{Authorization:r()}})}},{key:"putLevels",value:function(e){return o().put(i+"level",e,{headers:{Authorization:r()}})}},{key:"getUserBoard",value:function(){return o().get(i+"user",{headers:{Authorization:r()}})}},{key:"getModeratorBoard",value:function(){return o().get(i+"mod",{headers:{Authorization:r()}})}},{key:"getAdminBoard",value:function(){return o().get(i+"admin",{headers:{Authorization:r()}})}}]),e}())},3457:function(e,t,a){a.r(t),a.d(t,{Country:function(){return N},default:function(){return C}});var l=a(885),s=a(4942),n=a(5671),o=a(3144),r=a(7326),i=a(136),c=a(8347),d=a(2791),u=a(4912),h=(a(6016),a(5596)),m=a(5890),p=a(9961),g=a(7626),v=(a(3666),a(6293)),y=a(6042),x=a(9500),b=a(184);function f(){var e=(0,d.useState)(null),t=(0,l.Z)(e,2),a=t[0],s=t[1],n=(0,v.zV)({click:function(){n.locate()},locationfound:function(e){s(e.latlng),n.flyTo(e.latlng,n.getZoom())}});return null===a?null:(0,b.jsx)(y.J,{position:a,children:(0,b.jsx)(x.G,{children:"You are here"})})}var j=a(4045),N=function(e){(0,i.Z)(a,e);var t=(0,c.Z)(a);function a(e){var l;return(0,n.Z)(this,a),(l=t.call(this,e)).changestate=function(e,t){l.setState((0,s.Z)({},t,e.target.value))},l.handleChange=function(e){l.setState({startDate:e})},l.handleSubmit=function(e){e.preventDefault(),e.stopPropagation();var t=e.currentTarget;if(console.log(t),!1===t.checkValidity())e.preventDefault(),e.stopPropagation(),console.log("invalid");else{h.Z.putLevels(JSON.stringify({data:l.state.excelData})),l.setState({validated:!0});var a=new FormData;a.append("country",l.state.CountryName),a.append("codecountry",l.state.CountryCode),a.append("currency",l.state.Currency),a.append("levels",l.state.levels),console.log(typeof l.state.logo),null!==l.state.logo&&"string"!==typeof l.state.logo&&a.append("logo",l.state.logo),null!==l.state.slogo&&"string"!==typeof l.state.slogo&&a.append("secondLogo",l.state.slogo),a.append("poptarget",l.state.targetpopulation),a.append("poprate",l.state.growthRate),a.append("havehr",l.state.enableHR),a.append("mainlocation",l.state.mainlocation),a.append("logo2",l.state.logo2),a.append("usingtool",l.state.requiredcapacities),a.append("usingmaintenance",l.state.enableMaintaining),l.state.user.admin&&Object.keys(l.state.country).length?(a.append("id",l.state.country.id),console.log(l.state.targetpopulation),h.Z.editcountry(a).then((function(e){var t=JSON.parse(localStorage.getItem("country"));localStorage.setItem("country",JSON.stringify(e.data));var a=JSON.parse(localStorage.getItem("country"));if(a.levels>t.levels)for(var s=0;s<a.levels-t.levels;s++){var n={maxpop:0,minpop:0,uppervol:0,undervol:0,m25vol:0,m70vol:0,m25volnew:0,m70volnew:0,uppervolnew:0,undervolnew:0,name:"levels"+(t.levels+s+1),dryvol:0,dryvolnew:0,country:1,parent:t.levels+s-1};h.Z.addlevel(n).then((function(e){console.log(e)})).catch((function(e){console.log(e)}))}l.setState({CountryName:a.country,CountryCode:a.codecountry,Currency:a.currency,levels:a.levels,logo:a.logo,slogo:a.secondLogo,growthRate:a.poprate,targetpopulation:a.poptarget,enableHR:a.havehr,mainlocation:a.mainlocation,logo2:a.logo2,requiredcapacities:a.usingtool,enableMaintaining:a.usingmaintenance}),l.alerthandle("Country changed successfully","success")})).catch((function(e){l.alerthandle("Country changed unsuccessfully","error")}))):h.Z.addcountry(a).then((function(e){l.alerthandle("Country added successfully","success"),localStorage.setItem("country",JSON.stringify(e.data));for(var t=JSON.parse(localStorage.getItem("country")),a=0;a<t.levels;a++){var s={maxpop:0,minpop:0,uppervol:0,undervol:0,m25vol:0,m70vol:0,m25volnew:0,m70volnew:0,uppervolnew:0,undervolnew:0,name:"levels"+a,dryvol:0,dryvolnew:0,country:1,parent:0===a?null:a-1};h.Z.addlevel(s).then((function(e){console.log(e)})).catch((function(e){console.log(e)}))}l.setState({CountryName:t.country,CountryCode:t.codecountry,Currency:t.currency,levels:t.levels,logo:t.logo,slogo:t.secondLogo,growthRate:t.poprate,targetpopulation:t.poptarget,enableHR:t.havehr,mainlocation:t.mainlocation,logo2:t.logo2,requiredcapacities:t.usingtool,enableMaintaining:t.usingmaintenance})})).catch((function(e){l.alerthandle("Country added unsuccessfully","error")}))}},l.countryvalidator=function(){return 0===l.state.CountryCode.length||!(l.state.CountryCode.length>3)&&(!(l.state.CountryCode.length<3)&&!/\d/.test(l.state.CountryCode))},l.handleClosesnack=function(e,t){"clickaway"!==t&&l.setState({snackopen:!1})},l.ccodevalid=function(){return 0!==l.state.CountryCode.length&&(3===l.state.CountryCode.length||void 0)},l.cv=function(){return l.state.CountryName.length>1},l.CurrencyValidator=function(){return l.state.Currency.length<4},l.CV=function(){return l.state.Currency.length>0},l.state={levels:4,validated:!1,CountryName:"",CountryCode:"",Currency:"",logo:null,slogo:null,growthRate:0,mainlocation:"",enableHR:!1,enableMaintaining:!1,targetpopulation:"General population",requiredcapacities:!0,excelData:[],user:JSON.parse(localStorage.getItem("user")),country:JSON.parse(localStorage.getItem("country")),put:!1,snackopen:!1,type:"success",mainLocation:null},l.handleChange=l.handleChange.bind((0,r.Z)(l)),l.handleSubmit=l.handleSubmit.bind((0,r.Z)(l)),l.handleExcelChange=l.handleExcelChange.bind((0,r.Z)(l)),l.cv=l.cv.bind((0,r.Z)(l)),l.CV=l.CV.bind((0,r.Z)(l)),l.countryvalidator=l.countryvalidator.bind((0,r.Z)(l)),l.ccodevalid=l.ccodevalid.bind((0,r.Z)(l)),l.CurrencyValidator=l.CurrencyValidator.bind((0,r.Z)(l)),l}return(0,o.Z)(a,[{key:"alerthandle",value:function(e,t){this.setState({content:e,type:t,snackopen:!0})}},{key:"handleExcelChange",value:function(e){var t=this,a=(0,l.Z)(e.target.files,1)[0],s=new FileReader;s.onload=function(e){var a=e.target.result,l=j.ij(a,{type:"binary"}),s=l.SheetNames[0],n=l.Sheets[s],o=j.P6.sheet_to_csv(n,{header:1});t.setState({excelData:o})},s.readAsBinaryString(a)}},{key:"componentDidMount",value:function(){var e,t=JSON.parse(localStorage.getItem("user")),a=JSON.parse(localStorage.getItem("country"));0!==Object.keys(a).length&&this.setState((e={CountryName:a.country,CountryCode:a.codecountry,Currency:a.currency,levels:a.levels,logo:a.logo,slogo:a.secondLogo,growthRate:a.poprate,targetpopulation:a.poptarget,enableHR:a.havehr,mainlocation:a.mainlocation},(0,s.Z)(e,"slogo",a.logo2),(0,s.Z)(e,"requiredcapacities",a.usingtool),(0,s.Z)(e,"enableMaintaining",a.usingmaintenance),(0,s.Z)(e,"country",a),e));this.setState({user:t})}},{key:"render",value:function(){var e=this;return(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"page-header",children:(0,b.jsx)("h3",{className:"page-title",children:" Settings "})}),(0,b.jsx)("div",{className:"row",children:(0,b.jsx)("div",{className:"col-12 grid-margin",children:(0,b.jsx)("div",{className:"card",children:(0,b.jsxs)("div",{className:"card-body",children:[(0,b.jsx)("h4",{className:"card-title",children:"Add Country"}),(0,b.jsxs)(u.Z,{noValidate:!0,validated:this.state.validated,onSubmit:this.handleSubmit,className:"form-sample",children:[(0,b.jsxs)("h3",{className:" card-description text-bold",children:[" ","Country info"," "]}),(0,b.jsxs)("div",{className:"row",children:[(0,b.jsx)("div",{className:"col-md-6",children:(0,b.jsxs)(u.Z.Group,{className:"row",children:[(0,b.jsx)("label",{className:"col-sm-3 col-form-label control-label control-label",children:"Country"}),(0,b.jsx)("div",{className:"col-sm-9",children:(0,b.jsx)(u.Z.Control,{disabled:!this.state.user.admin,isValid:this.cv(),value:this.state.CountryName,onChange:function(t){console.log(t),e.setState({CountryName:t.target.value})},required:!0,placeholder:"Example: USA",type:"text"})})]})}),(0,b.jsx)("div",{className:"col-md-6",children:(0,b.jsxs)(u.Z.Group,{className:"row",children:[(0,b.jsx)("label",{className:"col-sm-3 col-form-label control-label",children:"Country code"}),(0,b.jsx)("div",{className:"col-sm-9",children:(0,b.jsx)(u.Z.Control,{disabled:!this.state.user.admin,required:!0,isInvalid:!this.countryvalidator(),isValid:this.ccodevalid(),value:this.state.CountryCode,onChange:function(t){var a=t.target.value;a.toString().toUpperCase(),e.setState({CountryCode:a})},placeholder:"Example: ABC",type:"text"})})]})})]}),(0,b.jsxs)("div",{className:"row",children:[(0,b.jsx)("div",{className:"col-md-6",children:(0,b.jsxs)(u.Z.Group,{className:"row",children:[(0,b.jsx)("label",{className:"col-sm-3 col-form-label control-label",children:"Currency"}),(0,b.jsx)("div",{className:"col-sm-9",children:(0,b.jsx)("div",{className:"input-group",children:(0,b.jsx)(u.Z.Control,{required:!0,disabled:!this.state.user.admin,isInvalid:!this.CurrencyValidator(),isValid:this.CV(),value:this.state.Currency,onChange:function(t){e.setState({Currency:t.target.value})},placeholder:"Example: $",type:"text",className:"form-control","aria-label":"Amount (to the nearest dollar)"})})})]})}),(0,b.jsx)("div",{className:"col-md-6",children:(0,b.jsxs)(u.Z.Group,{className:"row",children:[(0,b.jsx)("label",{className:"col-sm-3 col-form-label control-label",children:"Allow levels"}),(0,b.jsxs)("div",{style:{marginTop:"2.5%"},className:"col-sm-9 ",children:[(0,b.jsx)(u.Z.Control,{disabled:!this.state.user.admin,required:!0,onChange:function(t){e.setState({levels:t.target.value})},type:"range",min:"1",max:"8",step:"1",value:this.state.levels}),(0,b.jsxs)("label",{className:"col-sm-3 col-form-label  ",children:["value : ",this.state.levels," "]})]})]})})]}),(0,b.jsxs)("div",{className:"row",children:[(0,b.jsx)("div",{className:"col-md-6",children:(0,b.jsxs)(u.Z.Group,{className:"row",children:[(0,b.jsxs)("label",{className:"col-sm-3 col-form-label ",children:["logo"," "]}),(0,b.jsx)("div",{className:"col-sm-9",children:(0,b.jsxs)("div",{className:"custom-file ",children:[(0,b.jsx)(u.Z.Control,{onChange:function(t){e.setState({logo:t.target.files[0]})},disabled:!this.state.user.admin,type:"file",className:"form-control visibility-hidden",id:"customFileLang",lang:"es"}),(0,b.jsxs)("label",{className:"custom-file-label",htmlFor:"customFileLang",children:[null!==this.state.logo?this.state.logo.name:"Upload image","string"===typeof this.state.logo?this.state.logo.split("/")[2]:""]})]})})]})}),(0,b.jsx)("div",{className:"col-md-6",children:(0,b.jsxs)(u.Z.Group,{className:"row",children:[(0,b.jsxs)("label",{className:"col-sm-3 col-form-label ",children:["second logo"," "]}),(0,b.jsx)("div",{className:"col-sm-9",children:(0,b.jsxs)("div",{className:"custom-file ",children:[(0,b.jsx)(u.Z.Control,{onChange:function(t){e.setState({slogo:t.target.files[0]})},disabled:!this.state.user.admin,type:"file",className:"form-control visibility-hidden",id:"customFileLang1",lang:"es"}),(0,b.jsxs)("label",{className:"custom-file-label",htmlFor:"customFileLang1",children:[null!==this.state.slogo?this.state.slogo.name:"Upload image","string"===typeof this.state.slogo?this.state.slogo.split("/")[2]:""]})]})})]})})]}),(0,b.jsxs)("div",{className:"row",children:[(0,b.jsx)("div",{className:"col-md-6 ",children:(0,b.jsxs)(u.Z.Group,{className:" row  ",children:[(0,b.jsx)("label",{className:"col-sm-3 col-form-label control-label",children:"Annual Population Growth Rate"}),(0,b.jsx)("div",{className:"col-sm-9",children:(0,b.jsxs)("div",{className:"input-group ",children:[(0,b.jsx)(u.Z.Control,{disabled:!this.state.user.admin,required:!0,isValid:!0,value:this.state.growthRate,onChange:function(t){var a=t.target.value,l=a.split(".").length;if(console.log(l),l>1){var s=a.split(".")[0],n=a.split(".")[1].slice(0,2);a=s+"."+n,console.log(a)}e.setState({growthRate:parseFloat(a)})},type:"number",className:"form-control","aria-label":"Amount (to the nearest dollar)"}),(0,b.jsx)("div",{className:"input-group-append h-75 pb-3",children:(0,b.jsx)("span",{className:"input-group-text",children:"%"})})]})})]})}),(0,b.jsx)("div",{className:"col-md-6",children:(0,b.jsxs)(u.Z.Group,{className:"row",children:[(0,b.jsx)("label",{className:"col-sm-3 col-form-label ",children:"Main Location"}),(0,b.jsx)("div",{className:"col-sm-9",children:(0,b.jsx)(u.Z.Control,{disabled:!this.state.user.admin,value:this.state.mainlocation,onChange:function(t){e.setState({mainlocation:t.target.value})},type:"text"})})]})})]}),(0,b.jsxs)("div",{className:"row",children:[(0,b.jsx)("div",{className:"col-md-6",children:(0,b.jsxs)(u.Z.Group,{className:"row",children:[(0,b.jsx)("label",{className:"col-sm-5 col-form-label",children:"Enable HR"}),(0,b.jsx)("div",{className:"col-sm-7",children:(0,b.jsx)(u.Z.Check,{disabled:!this.state.user.admin,checked:this.state.enableHR,value:this.state.enableHR,onChange:function(t){e.setState({enableHR:!e.state.enableHR})},type:"switch",label:"",id:"disabled-custom-switch"})})]})}),(0,b.jsx)("div",{className:"col-md-6",children:(0,b.jsxs)(u.Z.Group,{className:"row",children:[(0,b.jsx)("label",{className:"col-sm-5 col-form-label",children:"Enable Maintenance"}),(0,b.jsx)("div",{className:"col-sm-7",children:(0,b.jsx)(u.Z.Check,{checked:this.state.enableMaintaining,disabled:!this.state.user.admin,onChange:function(t){e.setState({enableMaintaining:!e.state.enableMaintaining})},type:"switch",label:"",id:"disabled-custom"})})]})})]}),(0,b.jsxs)("div",{className:"row",children:[(0,b.jsx)("div",{className:"col-md-6",children:(0,b.jsxs)(u.Z.Group,{className:"row",children:[(0,b.jsx)("label",{className:"col-sm-3 col-form-label control-label",children:"Target Population"}),(0,b.jsx)("div",{className:"col-sm-9",children:(0,b.jsxs)(u.Z.Control,{required:!0,disabled:!this.state.user.admin,onChange:function(t){e.setState({targetpopulation:t.target.value})},value:this.state.targetpopulation,className:"form-select",as:"select",children:[(0,b.jsx)("option",{value:"General population",children:"General population"}),(0,b.jsx)("option",{value:"Under-1 Population",children:"Under-1 Population"})]})})]})}),(0,b.jsx)("div",{className:"col-md-6",children:(0,b.jsxs)(u.Z.Group,{className:"row",children:[(0,b.jsx)("label",{className:"col-sm-3 col-form-label ",children:"Require Capacity"}),(0,b.jsx)("div",{className:"col-sm-9",children:(0,b.jsxs)(u.Z.Control,{disabled:!this.state.user.admin,onChange:function(t){var a="true"===t.target.value;e.setState({requiredcapacities:a})},value:this.state.requiredcapacities,className:"form-select",as:"select",children:[(0,b.jsx)("option",{value:!0,children:"Estimate required capacity (in MS Excel)"}),(0,b.jsx)("option",{value:!1,children:"Enter required capacity manually"})]})}),!0===this.state.requiredcapacities&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"col-sm-3"}),(0,b.jsx)("div",{className:"col-sm-9",children:(0,b.jsx)(u.Z.Control,{as:"input",type:"file",accept:".xlsx",onChange:this.handleExcelChange})})]})]})})]}),(0,b.jsx)("div",{className:"col-md-6",children:(0,b.jsxs)(u.Z.Group,{className:"row",children:[(0,b.jsx)("label",{className:"col-sm-3 col-form-label ",children:"Main Location"}),(0,b.jsx)("div",{className:"map",children:(0,b.jsxs)(p.h,{center:[52.22977,21.01178],zoom:13,scrollWheelZoom:!1,children:[(0,b.jsx)(g.I,{attribution:'&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),(0,b.jsx)(f,{})]})})]})}),this.state.country!==[]&&void 0!==this.state.country&&this.state.user.admin?(0,b.jsx)("button",{type:"submit",className:"btn btn-primary mr-2",children:"Save"}):(0,b.jsx)("button",{type:"submit",disabled:!0,className:"btn btn-primary mr-2",children:"Save"})]})]})})})}),(0,b.jsx)(m.Z,{style:{position:"absolute",top:"120%",right:"0",backgroundColor:"success"==this.state.type?"#03A10A":"#F8D7DA",color:"#000"},onClose:function(t){e.handleClosesnack(t)},show:this.state.snackopen,delay:3e3,autohide:!0,className:"d-inline-block m-1",bg:this.state.type,children:(0,b.jsx)(m.Z.Body,{children:this.state.content})})]})}}]),a}(d.Component),C=N}}]);
//# sourceMappingURL=798.771cfb5f.chunk.js.map