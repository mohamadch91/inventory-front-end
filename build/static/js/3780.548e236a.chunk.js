"use strict";(self.webpackChunkinventory=self.webpackChunkinventory||[]).push([[3780],{73780:function(e,a,l){l.r(a),l.d(a,{Country:function(){return C},default:function(){return b}});var t=l(29439),s=l(4942),n=l(15671),o=l(43144),i=l(97326),r=l(60136),c=l(54062),d=l(72791),u=l(16149),m=l(17994),h=(l(23666),l(78559)),p=l.n(h),g=l(34045),v=l(65218),y=l(67844),x=l(30606),j=l(80184);delete p().Icon.Default.prototype._getIconUrl,p().Icon.Default.mergeOptions({iconRetinaUrl:l(6431),iconUrl:l(37093),shadowUrl:l(68858)});var C=function(e){(0,r.Z)(l,e);var a=(0,c.Z)(l);function l(e){var t;return(0,n.Z)(this,l),(t=a.call(this,e)).changestate=function(e,a){t.setState((0,s.Z)({},a,e.target.value))},t.handleChange=function(e){t.setState({startDate:e})},t.handleSubmit=function(e){e.preventDefault(),e.stopPropagation();var a=e.currentTarget;if(!t.isCountryCodeValid()||!t.isCurrencyValid()||!t.isCountryValid())return t.setState({validated:!1}),e.preventDefault(),e.stopPropagation(),void v.Am.error("complete form correctly");if(!1===a.checkValidity())e.preventDefault(),e.stopPropagation(),v.Am.error("complete form correctly");else{var l;t.setState({validated:!0});var s=new FormData;s.append("country",t.state.CountryName),s.append("codecountry",t.state.CountryCode),s.append("currency",t.state.Currency),s.append("levels",t.state.levels),null!==t.state.logo&&"string"!==typeof t.state.logo&&s.append("logo",t.state.logo),null!==t.state.slogo&&"string"!==typeof t.state.slogo&&s.append("secondLogo",t.state.slogo),s.append("poptarget",t.state.targetpopulation),s.append("poprate",t.state.growthRate),s.append("havehr",t.state.enableHR),s.append("mainlocation",t.state.mainlocation),s.append("logo2",t.state.logo2),s.append("usingtool",t.state.requiredcapacities),s.append("usingmaintenance",t.state.enableMaintaining),null!==(l=t.state.user)&&void 0!==l&&l.admin&&Object.keys(t.state.country).length?(s.append("id",t.state.country.id),m.Z.editcountry(s).then((function(e){var a=JSON.parse(localStorage.getItem("country"));localStorage.setItem("country",JSON.stringify(e.data));var l=JSON.parse(localStorage.getItem("country"));if(l.levels>a.levels)for(var s=0;s<l.levels-a.levels;s++){var n={maxpop:0,minpop:0,uppervol:0,undervol:0,m25vol:0,m70vol:0,m25volnew:0,m70volnew:0,uppervolnew:0,undervolnew:0,name:"levels"+(a.levels+s+1),dryvol:0,dryvolnew:0,country:1,parent:a.levels+s-1};m.Z.addlevel(n).then((function(e){console.log(e)})).catch((function(e){console.log(e)}))}t.setState({CountryName:l.country,CountryCode:l.codecountry,Currency:l.currency,levels:l.levels,logo:l.logo,slogo:l.secondLogo,growthRate:l.poprate,targetpopulation:l.poptarget,enableHR:l.havehr,mainlocation:l.mainlocation,requiredcapacities:l.usingtool,enableMaintaining:l.usingmaintenance}),t.alerthandle("Country changed successfully","success"),v.Am.success("Country changed successfully")})).catch((function(e){t.alerthandle("Country changed unsuccessfully","error"),v.Am.error("Country changed unsuccessfully")}))):m.Z.addcountry(s).then((function(e){t.alerthandle("Country added successfully","success"),v.Am.success("Country added successfully"),localStorage.setItem("country",JSON.stringify(e.data));for(var a=JSON.parse(localStorage.getItem("country")),l=0;l<a.levels;l++){var s={maxpop:0,minpop:0,uppervol:0,undervol:0,m25vol:0,m70vol:0,m25volnew:0,m70volnew:0,uppervolnew:0,undervolnew:0,name:"levels"+l,dryvol:0,dryvolnew:0,country:1,parent:0===l?null:l-1};m.Z.addlevel(s).then((function(e){console.log(e)})).catch((function(e){console.log(e)}))}t.setState({CountryName:a.country,CountryCode:a.codecountry,Currency:a.currency,levels:a.levels,logo:a.logo,slogo:a.secondLogo,growthRate:a.poprate,targetpopulation:a.poptarget,enableHR:a.havehr,mainlocation:a.mainlocation,requiredcapacities:a.usingtool,enableMaintaining:a.usingmaintenance})})).catch((function(e){t.alerthandle("Country added unsuccessfully","error"),v.Am.error("Country added unsuccessfully")}))}},t.isCountryCodeValid=function(){return 0===t.state.CountryCode.length||!(t.state.CountryCode.length>3)&&(!(t.state.CountryCode.length<3)&&!/\d/.test(t.state.CountryCode))},t.isCountryValid=function(){return t.state.CountryName.length>1&&!/\d/.test(t.state.CountryName)},t.isCurrencyValid=function(){return t.state.Currency.length>0&&t.state.Currency.length<4&&!/\d/.test(t.state.Currency)},t.handleClosesnack=function(e,a){"clickaway"!==a&&t.setState({snackopen:!1})},t.state={levels:4,validated:!1,CountryName:"",CountryCode:"",Currency:"",logo:null,slogo:null,growthRate:0,mainlocation:"",enableHR:!1,enableMaintaining:!1,targetpopulation:"General population",requiredcapacities:!0,excelData:[],user:JSON.parse(localStorage.getItem("user")),country:JSON.parse(localStorage.getItem("country")),put:!1,snackopen:!1,type:"success",isCountyValid:!1,isCountyCodeValid:!1,isCurrencyValid:!1},t.handleChange=t.handleChange.bind((0,i.Z)(t)),t.handleSubmit=t.handleSubmit.bind((0,i.Z)(t)),t.handleExcelChange=t.handleExcelChange.bind((0,i.Z)(t)),t.isCountryValid=t.isCountryValid.bind((0,i.Z)(t)),t.isCurrencyValid=t.isCurrencyValid.bind((0,i.Z)(t)),t.isCountryCodeValid=t.isCountryCodeValid.bind((0,i.Z)(t)),t.handlemapclick=t.handlemapclick.bind((0,i.Z)(t)),t}return(0,o.Z)(l,[{key:"alerthandle",value:function(e,a){this.setState({content:e,type:a,snackopen:!0})}},{key:"handlemapclick",value:function(e){this.setState({mainlocation:e.latlng})}},{key:"handleExcelChange",value:function(e){var a=this,l=(0,t.Z)(e.target.files,1)[0],s=new FileReader;s.onload=function(e){var l=e.target.result,t=g.ij(l,{type:"binary"}),s=t.SheetNames[0],n=t.Sheets[s],o=g.P6.sheet_to_csv(n,{header:1});a.setState({excelData:o})},s.readAsBinaryString(l)}},{key:"componentDidMount",value:function(){var e=JSON.parse(localStorage.getItem("user")),a=JSON.parse(localStorage.getItem("country"));0!==Object.keys(a).length&&this.setState({CountryName:a.country,CountryCode:a.codecountry,Currency:a.currency,levels:a.levels,logo:a.logo,slogo:a.secondLogo,growthRate:a.poprate,targetpopulation:a.poptarget,enableHR:a.havehr,mainlocation:a.mainlocation,requiredcapacities:a.usingtool,enableMaintaining:a.usingmaintenance,country:a}),this.setState({user:e})}},{key:"render",value:function(){var e,a,l,t,s,n,o,i,r,c,d,m=this;return(0,j.jsxs)("div",{children:[(0,j.jsx)("div",{className:"page-header",children:(0,j.jsxs)("h1",{className:"page-title",children:[" ",(0,j.jsx)(x.c,{children:"Settings"})," "]})}),(0,j.jsx)("div",{className:"row",children:(0,j.jsx)("div",{className:"col-12 grid-margin",children:(0,j.jsx)("div",{className:"card",children:(0,j.jsxs)("div",{className:"card-body",children:[(0,j.jsx)("h4",{className:"card-title",children:(0,j.jsx)(x.c,{children:"Add Country"})}),(0,j.jsxs)(u.Z,{noValidate:!0,validated:this.state.validated,onSubmit:this.handleSubmit,className:"form-sample",children:[(0,j.jsxs)("h3",{className:" card-description text-bold",children:[" ",(0,j.jsx)(x.c,{children:"Country info"})]}),(0,j.jsxs)("div",{className:"row",children:[(0,j.jsx)("div",{className:"col-md-6",children:(0,j.jsxs)(u.Z.Group,{className:"row",children:[(0,j.jsx)("label",{className:"col-sm-3 col-form-label control-label control-label",children:(0,j.jsx)(x.c,{children:"Country"})}),(0,j.jsx)("div",{className:"col-sm-9",children:(0,j.jsx)(u.Z.Control,{isValid:this.isCountryValid(),isInvalid:!this.isCountryValid(),value:this.state.CountryName,onChange:function(e){m.setState({CountryName:e.target.value})},required:!0,placeholder:"Example: USA",type:"text"})})]})}),(0,j.jsx)("div",{className:"col-md-6",children:(0,j.jsxs)(u.Z.Group,{className:"row",children:[(0,j.jsx)("label",{className:"col-sm-3 col-form-label control-label",children:(0,j.jsx)(x.c,{children:"Country code"})}),(0,j.jsx)("div",{className:"col-sm-9",children:(0,j.jsx)(u.Z.Control,{disabled:!(null!==(e=this.state.user)&&void 0!==e&&e.admin),required:!0,isInvalid:!this.isCountryCodeValid(),isValid:this.isCountryCodeValid(),value:this.state.CountryCode,onChange:function(e){var a=e.target.value.toString().toUpperCase();m.setState({CountryCode:a})},placeholder:"Example: ABC",type:"text"})})]})})]}),(0,j.jsxs)("div",{className:"row",children:[(0,j.jsx)("div",{className:"col-md-6",children:(0,j.jsxs)(u.Z.Group,{className:"row",children:[(0,j.jsx)("label",{className:"col-sm-3 col-form-label control-label",children:(0,j.jsx)(x.c,{children:"Currency"})}),(0,j.jsx)("div",{className:"col-sm-9",children:(0,j.jsx)("div",{className:"input-group",children:(0,j.jsx)(u.Z.Control,{required:!0,disabled:!(null!==(a=this.state.user)&&void 0!==a&&a.admin),isInvalid:!this.isCurrencyValid(),isValid:this.isCurrencyValid(),value:this.state.Currency,onChange:function(e){m.setState({Currency:e.target.value})},placeholder:"Example: $",type:"text",className:"form-control","aria-label":"Amount (to the nearest dollar)"})})})]})}),(0,j.jsx)("div",{className:"col-md-6",children:(0,j.jsxs)(u.Z.Group,{className:"row",children:[(0,j.jsx)("label",{className:"col-sm-3 col-form-label control-label",children:(0,j.jsx)(x.c,{children:"Allow levels"})}),(0,j.jsxs)("div",{style:{marginTop:"2.5%"},className:"col-sm-9 ",children:[(0,j.jsx)(u.Z.Control,{disabled:!(null!==(l=this.state.user)&&void 0!==l&&l.admin),required:!0,onChange:function(e){m.setState({levels:e.target.value})},type:"range",min:"1",max:"8",step:"1",value:this.state.levels}),(0,j.jsxs)("label",{className:"col-sm-3 col-form-label  ",children:[(0,j.jsx)(x.c,{children:"value :"})," ",this.state.levels," "]})]})]})})]}),(0,j.jsxs)("div",{className:"row",children:[(0,j.jsx)("div",{className:"col-md-6",children:(0,j.jsxs)(u.Z.Group,{className:"row",children:[(0,j.jsx)("label",{className:"col-sm-3 col-form-label ",children:(0,j.jsxs)(x.c,{children:[" ","logo ",(0,j.jsx)("br",{})," jpg, jpeg, png ",(0,j.jsx)("br",{}),"aspect ratio 16:4"]})}),(0,j.jsx)("div",{className:"col-sm-9 mt-3",children:(0,j.jsxs)("div",{className:"custom-file ",children:[(0,j.jsx)(u.Z.Control,{onChange:function(e){m.setState({logo:e.target.files[0]})},disabled:!(null!==(t=this.state.user)&&void 0!==t&&t.admin),type:"file",className:"form-control visibility-hidden",id:"customFileLang",lang:"es",accept:"image/png, image/jpeg, image/jpg"}),(0,j.jsxs)("label",{className:"custom-file-label",htmlFor:"customFileLang",children:[null!==this.state.logo?this.state.logo.name:"Upload image","string"===typeof this.state.logo?this.state.logo.split("/")[2]:""]})]})})]})}),(0,j.jsx)("div",{className:"col-md-6",children:(0,j.jsxs)(u.Z.Group,{className:"row",children:[(0,j.jsx)("label",{className:"col-sm-3 col-form-label ",children:(0,j.jsxs)(x.c,{children:[" ","second logo ",(0,j.jsx)("br",{})," jpg, jpeg, png",(0,j.jsx)("br",{})," aspect ratio 1:1"]})}),(0,j.jsx)("div",{className:"col-sm-9 mt-3",children:(0,j.jsxs)("div",{className:"custom-file ",children:[(0,j.jsx)(u.Z.Control,{onChange:function(e){m.setState({slogo:e.target.files[0]})},disabled:!(null!==(s=this.state.user)&&void 0!==s&&s.admin),type:"file",className:"form-control visibility-hidden",id:"customFileLang1",lang:"es",accept:"image/png, image/jpeg, image/jpg"}),(0,j.jsxs)("label",{className:"custom-file-label",htmlFor:"customFileLang1",children:[null!==this.state.slogo?this.state.slogo.name:"Upload image","string"===typeof this.state.slogo?this.state.slogo.split("/")[2]:""]})]})})]})})]}),(0,j.jsx)("div",{className:"row",children:(0,j.jsx)("div",{className:"col-md-6 ",children:(0,j.jsxs)(u.Z.Group,{className:" row  ",children:[(0,j.jsx)("label",{className:"col-sm-3 col-form-label control-label",children:(0,j.jsx)(x.c,{children:"Annual Population Growth Rate"})}),(0,j.jsx)("div",{className:"col-sm-9",children:(0,j.jsxs)("div",{className:"input-group ",children:[(0,j.jsx)(u.Z.Control,{disabled:!(null!==(n=this.state.user)&&void 0!==n&&n.admin),required:!0,isValid:!0,value:this.state.growthRate,onChange:function(e){var a=e.target.value;if(a.split(".").length>1){var l=a.split(".")[0],t=a.split(".")[1].slice(0,2);a=l+"."+t}m.setState({growthRate:parseFloat(a)})},type:"number",className:"form-control","aria-label":"Amount (to the nearest dollar)"}),(0,j.jsx)("div",{className:"input-group-append h-75 pb-3",children:(0,j.jsx)("span",{className:"input-group-text",children:"%"})})]})})]})})}),(0,j.jsxs)("div",{className:"row",children:[(0,j.jsx)("div",{className:"col-md-6",children:(0,j.jsxs)(u.Z.Group,{className:"row",children:[(0,j.jsx)("label",{className:"col-sm-5 col-form-label",children:(0,j.jsx)(x.c,{children:"Enable HR"})}),(0,j.jsx)("div",{className:"col-sm-7",children:(0,j.jsx)(u.Z.Check,{disabled:!(null!==(o=this.state.user)&&void 0!==o&&o.admin),checked:this.state.enableHR,value:this.state.enableHR,onChange:function(e){m.setState({enableHR:!m.state.enableHR})},type:"switch",label:"",id:"disabled-custom-switch"})})]})}),(0,j.jsx)("div",{className:"col-md-6",children:(0,j.jsxs)(u.Z.Group,{className:"row",children:[(0,j.jsx)("label",{className:"col-sm-5 col-form-label",children:(0,j.jsx)(x.c,{children:"Enable Maintenance"})}),(0,j.jsx)("div",{className:"col-sm-7",children:(0,j.jsx)(u.Z.Check,{checked:this.state.enableMaintaining,disabled:!(null!==(i=this.state.user)&&void 0!==i&&i.admin),onChange:function(e){m.setState({enableMaintaining:!m.state.enableMaintaining})},type:"switch",label:"",id:"disabled-custom"})})]})})]}),(0,j.jsxs)("div",{className:"row",children:[(0,j.jsx)("div",{className:"col-md-6",children:(0,j.jsxs)(u.Z.Group,{className:"row",children:[(0,j.jsx)("label",{className:"col-sm-3 col-form-label control-label",children:(0,j.jsx)(x.c,{children:" Target Population"})}),(0,j.jsx)("div",{className:"col-sm-9",children:(0,j.jsxs)(u.Z.Control,{required:!0,disabled:!(null!==(r=this.state.user)&&void 0!==r&&r.admin),onChange:function(e){m.setState({targetpopulation:e.target.value})},value:this.state.targetpopulation,className:"form-select",as:"select",children:[(0,j.jsx)("option",{value:"General population",children:"General population"}),(0,j.jsx)("option",{value:"Under-1 Population",children:"Under-1 Population"})]})})]})}),(0,j.jsx)("div",{className:"col-md-6",children:(0,j.jsxs)(u.Z.Group,{className:"row",children:[(0,j.jsx)("label",{className:"col-sm-3 col-form-label control-label",children:(0,j.jsx)(x.c,{children:"Require Capacity"})}),(0,j.jsx)("div",{className:"col-sm-9",children:(0,j.jsxs)(u.Z.Control,{required:!0,disabled:!(null!==(c=this.state.user)&&void 0!==c&&c.admin),onChange:function(e){var a="true"===e.target.value;m.setState({requiredcapacities:a})},value:this.state.requiredcapacities,className:"form-select",as:"select",children:[(0,j.jsx)("option",{"data-i18n":"[html]content.body",value:!0,children:"Estimate required capacity (in MS Excel)"},"Estimate required capacity (in MS Excel)"),(0,j.jsx)("option",{value:!1,children:"Enter required capacity manually"})]})})]})})]}),(0,j.jsxs)(u.Z.Group,{className:"row",children:[(0,j.jsxs)("div",{className:"col-md-6",children:[(0,j.jsx)("label",{className:"col-sm-3 col-form-label ",children:(0,j.jsx)(x.c,{children:"Main Location"})}),(0,j.jsx)("div",{className:"map",children:(0,j.jsx)(y.Z,{loca:this.state.mainlocation,handleChange:this.handlemapclick})})]}),(0,j.jsx)("div",{className:"col-md-6",children:(0,j.jsx)(u.Z.Group,{className:"mt-5",children:(0,j.jsx)("div",{className:"col-sm-12",children:(0,j.jsx)(u.Z.Control,{disabled:!0,value:this.state.mainlocation,onChange:function(e){m.setState({mainlocation:e.target.value})},type:"text"})})})})]}),this.state.country!==[]&&void 0!==this.state.country&&null!==(d=this.state.user)&&void 0!==d&&d.admin?(0,j.jsx)("button",{type:"submit",className:"btn btn-primary mr-2",children:(0,j.jsx)(x.c,{children:"Save"})}):(0,j.jsx)("button",{type:"submit",disabled:!0,className:"btn btn-primary mr-2",children:(0,j.jsx)(x.c,{children:"Save"})})]})]})})})})]})}}]),l}(d.Component),b=C}}]);
//# sourceMappingURL=3780.548e236a.chunk.js.map