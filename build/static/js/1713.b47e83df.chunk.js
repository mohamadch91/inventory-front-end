"use strict";(self.webpackChunkinventory=self.webpackChunkinventory||[]).push([[1713],{28469:function(e,t,a){a.r(t),a.d(t,{Country:function(){return Z},default:function(){return k}});var l=a(70885),n=a(4942),s=a(15671),o=a(43144),r=a(97326),c=a(60136),i=a(98557),d=a(72791),u=a(94912),m=(a(76016),a(17994)),h=(a(23666),a(78559)),p=a.n(h),g=a(34045),v=a(65218),y=a(46293),x=a(69961),f=a(17626),b=a(6042),C=a(59500),j=a(80184);function N(){var e=(0,d.useState)(null),t=(0,l.Z)(e,2),a=t[0],n=t[1],s=(0,y.zV)({click:function(){s.locate()},locationfound:function(e){n(e.latlng),s.flyTo(e.latlng,s.getZoom())}});return null===a?null:(0,j.jsx)(j.Fragment,{})}delete p().Icon.Default.prototype._getIconUrl,p().Icon.Default.mergeOptions({iconRetinaUrl:a(6431),iconUrl:a(37093),shadowUrl:a(68858)});var S=function(e){var t=(0,y.Sx)();return(0,d.useEffect)((function(){if(t){var a=p().DomUtil.create("div","legend"),l=p().Control.extend({options:{position:"bottomleft"},onAdd:function(){return a.textContent="Click on map",a}});t.on("click",(function(t){window.navigator.geolocation.getCurrentPosition(console.log,console.log),a.textContent=t.latlng,function(t){e.change(t)}(t)})),t.addControl(new l)}}),[t]),null},w=function(e){var t=(0,d.useState)(null),a=(0,l.Z)(t,2),n=a[0],s=a[1];return(0,j.jsxs)(x.h,{center:[52.22,21.01178],zoom:13,scrollWheelZoom:!0,children:[(0,j.jsx)(f.I,{attribution:'&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),(0,j.jsx)(S,{change:function(t){e.handleChange(t),s(t.latlng)}}),(0,j.jsx)(j.Fragment,{children:n&&(0,j.jsx)(b.J,{position:n,draggable:!0,children:(0,j.jsxs)(C.G,{position:n,children:["Current location: ",(0,j.jsx)("pre",{children:JSON.stringify(n,null,2)})]})})}),(0,j.jsx)(N,{})]})};delete p().Icon.Default.prototype._getIconUrl,p().Icon.Default.mergeOptions({iconRetinaUrl:a(6431),iconUrl:a(37093),shadowUrl:a(68858)});var Z=function(e){(0,c.Z)(a,e);var t=(0,i.Z)(a);function a(e){var l;return(0,s.Z)(this,a),(l=t.call(this,e)).changestate=function(e,t){l.setState((0,n.Z)({},t,e.target.value))},l.handleChange=function(e){l.setState({startDate:e})},l.handleSubmit=function(e){e.preventDefault(),e.stopPropagation();var t=e.currentTarget;if(!l.countryvalidator()||!l.CV())return l.setState({validated:!1}),console.log("salam"),e.preventDefault(),e.stopPropagation(),void v.Am.error("complete form correctly");if(!1===t.checkValidity())e.preventDefault(),e.stopPropagation(),v.Am.error("complete form correctly");else{l.setState({validated:!0});var a=new FormData;a.append("country",l.state.CountryName),a.append("codecountry",l.state.CountryCode),a.append("currency",l.state.Currency),a.append("levels",l.state.levels),console.log(typeof l.state.logo),null!==l.state.logo&&"string"!==typeof l.state.logo&&a.append("logo",l.state.logo),null!==l.state.slogo&&"string"!==typeof l.state.slogo&&a.append("secondLogo",l.state.slogo),a.append("poptarget",l.state.targetpopulation),a.append("poprate",l.state.growthRate),a.append("havehr",l.state.enableHR),a.append("mainlocation",l.state.mainlocation),a.append("logo2",l.state.logo2),a.append("usingtool",l.state.requiredcapacities),a.append("usingmaintenance",l.state.enableMaintaining),l.state.user.admin&&Object.keys(l.state.country).length?(a.append("id",l.state.country.id),console.log(l.state.targetpopulation),m.Z.editcountry(a).then((function(e){var t=JSON.parse(localStorage.getItem("country"));localStorage.setItem("country",JSON.stringify(e.data));var a=JSON.parse(localStorage.getItem("country"));if(a.levels>t.levels)for(var n=0;n<a.levels-t.levels;n++){var s={maxpop:0,minpop:0,uppervol:0,undervol:0,m25vol:0,m70vol:0,m25volnew:0,m70volnew:0,uppervolnew:0,undervolnew:0,name:"levels"+(t.levels+n+1),dryvol:0,dryvolnew:0,country:1,parent:t.levels+n-1};console.log("hello"),m.Z.addlevel(s).then((function(e){console.log(e)})).catch((function(e){console.log(e)}))}l.setState({CountryName:a.country,CountryCode:a.codecountry,Currency:a.currency,levels:a.levels,logo:a.logo,slogo:a.secondLogo,growthRate:a.poprate,targetpopulation:a.poptarget,enableHR:a.havehr,mainlocation:a.mainlocation,requiredcapacities:a.usingtool,enableMaintaining:a.usingmaintenance}),l.alerthandle("Country changed successfully","success"),v.Am.success("Country changed successfully")})).catch((function(e){l.alerthandle("Country changed unsuccessfully","error"),v.Am.error("Country changed unsuccessfully")}))):m.Z.addcountry(a).then((function(e){l.alerthandle("Country added successfully","success"),v.Am.success("Country added successfully"),localStorage.setItem("country",JSON.stringify(e.data));for(var t=JSON.parse(localStorage.getItem("country")),a=0;a<t.levels;a++){var n={maxpop:0,minpop:0,uppervol:0,undervol:0,m25vol:0,m70vol:0,m25volnew:0,m70volnew:0,uppervolnew:0,undervolnew:0,name:"levels"+a,dryvol:0,dryvolnew:0,country:1,parent:0===a?null:a-1};m.Z.addlevel(n).then((function(e){console.log(e)})).catch((function(e){console.log(e)}))}l.setState({CountryName:t.country,CountryCode:t.codecountry,Currency:t.currency,levels:t.levels,logo:t.logo,slogo:t.secondLogo,growthRate:t.poprate,targetpopulation:t.poptarget,enableHR:t.havehr,mainlocation:t.mainlocation,requiredcapacities:t.usingtool,enableMaintaining:t.usingmaintenance})})).catch((function(e){l.alerthandle("Country added unsuccessfully","error"),v.Am.error("Country added unsuccessfully")}))}},l.countryvalidator=function(){return 0===l.state.CountryCode.length||!(l.state.CountryCode.length>3)&&(!(l.state.CountryCode.length<3)&&!/\d/.test(l.state.CountryCode))},l.handleClosesnack=function(e,t){"clickaway"!==t&&l.setState({snackopen:!1})},l.ccodevalid=function(){return 0===l.state.CountryCode.length||3!==l.state.CountryCode.length},l.cv=function(){return l.state.CountryName.length>1},l.CurrencyValidator=function(){return l.state.Currency.length<4},l.CV=function(){return l.state.Currency.length>0},l.state={levels:4,validated:!1,CountryName:"",CountryCode:"",Currency:"",logo:null,slogo:null,growthRate:0,mainlocation:"",enableHR:!1,enableMaintaining:!1,targetpopulation:"General population",requiredcapacities:!0,excelData:[],user:JSON.parse(localStorage.getItem("user")),country:JSON.parse(localStorage.getItem("country")),put:!1,snackopen:!1,type:"success"},l.handleChange=l.handleChange.bind((0,r.Z)(l)),l.handleSubmit=l.handleSubmit.bind((0,r.Z)(l)),l.handleExcelChange=l.handleExcelChange.bind((0,r.Z)(l)),l.cv=l.cv.bind((0,r.Z)(l)),l.CV=l.CV.bind((0,r.Z)(l)),l.countryvalidator=l.countryvalidator.bind((0,r.Z)(l)),l.ccodevalid=l.ccodevalid.bind((0,r.Z)(l)),l.CurrencyValidator=l.CurrencyValidator.bind((0,r.Z)(l)),l.handlemapclick=l.handlemapclick.bind((0,r.Z)(l)),l}return(0,o.Z)(a,[{key:"alerthandle",value:function(e,t){this.setState({content:e,type:t,snackopen:!0})}},{key:"handlemapclick",value:function(e){this.setState({mainlocation:e.latlng})}},{key:"handleExcelChange",value:function(e){var t=this,a=(0,l.Z)(e.target.files,1)[0],n=new FileReader;n.onload=function(e){var a=e.target.result,l=g.ij(a,{type:"binary"}),n=l.SheetNames[0],s=l.Sheets[n],o=g.P6.sheet_to_csv(s,{header:1});t.setState({excelData:o})},n.readAsBinaryString(a)}},{key:"componentDidMount",value:function(){var e=JSON.parse(localStorage.getItem("user")),t=JSON.parse(localStorage.getItem("country"));0!==Object.keys(t).length&&this.setState({CountryName:t.country,CountryCode:t.codecountry,Currency:t.currency,levels:t.levels,logo:t.logo,slogo:t.secondLogo,growthRate:t.poprate,targetpopulation:t.poptarget,enableHR:t.havehr,mainlocation:t.mainlocation,requiredcapacities:t.usingtool,enableMaintaining:t.usingmaintenance,country:t}),this.setState({user:e})}},{key:"render",value:function(){var e=this;return(0,j.jsxs)("div",{children:[(0,j.jsx)("div",{className:"page-header",children:(0,j.jsx)("h3",{className:"page-title",children:" Settings "})}),(0,j.jsx)("div",{className:"row",children:(0,j.jsx)("div",{className:"col-12 grid-margin",children:(0,j.jsx)("div",{className:"card",children:(0,j.jsxs)("div",{className:"card-body",children:[(0,j.jsx)("h4",{className:"card-title",children:"Add Country"}),(0,j.jsxs)(u.Z,{noValidate:!0,validated:this.state.validated,onSubmit:this.handleSubmit,className:"form-sample",children:[(0,j.jsxs)("h3",{className:" card-description text-bold",children:[" ","Country info"," "]}),(0,j.jsxs)("div",{className:"row",children:[(0,j.jsx)("div",{className:"col-md-6",children:(0,j.jsxs)(u.Z.Group,{className:"row",children:[(0,j.jsx)("label",{className:"col-sm-3 col-form-label control-label control-label",children:"Country"}),(0,j.jsx)("div",{className:"col-sm-9",children:(0,j.jsx)(u.Z.Control,{isValid:this.cv(),value:this.state.CountryName,onChange:function(t){console.log(t),e.setState({CountryName:t.target.value})},required:!0,placeholder:"Example: USA",type:"text"})})]})}),(0,j.jsx)("div",{className:"col-md-6",children:(0,j.jsxs)(u.Z.Group,{className:"row",children:[(0,j.jsx)("label",{className:"col-sm-3 col-form-label control-label",children:"Country code"}),(0,j.jsx)("div",{className:"col-sm-9",children:(0,j.jsx)(u.Z.Control,{disabled:!this.state.user.admin,required:!0,isInvalid:this.ccodevalid(),isValid:this.countryvalidator(),value:this.state.CountryCode,onChange:function(t){var a=t.target.value.toString().toUpperCase();e.setState({CountryCode:a})},placeholder:"Example: ABC",type:"text"})})]})})]}),(0,j.jsxs)("div",{className:"row",children:[(0,j.jsx)("div",{className:"col-md-6",children:(0,j.jsxs)(u.Z.Group,{className:"row",children:[(0,j.jsx)("label",{className:"col-sm-3 col-form-label control-label",children:"Currency"}),(0,j.jsx)("div",{className:"col-sm-9",children:(0,j.jsx)("div",{className:"input-group",children:(0,j.jsx)(u.Z.Control,{required:!0,disabled:!this.state.user.admin,isInvalid:!this.CurrencyValidator(),isValid:this.CV(),value:this.state.Currency,onChange:function(t){e.setState({Currency:t.target.value})},placeholder:"Example: $",type:"text",className:"form-control","aria-label":"Amount (to the nearest dollar)"})})})]})}),(0,j.jsx)("div",{className:"col-md-6",children:(0,j.jsxs)(u.Z.Group,{className:"row",children:[(0,j.jsx)("label",{className:"col-sm-3 col-form-label control-label",children:"Allow levels"}),(0,j.jsxs)("div",{style:{marginTop:"2.5%"},className:"col-sm-9 ",children:[(0,j.jsx)(u.Z.Control,{disabled:!this.state.user.admin,required:!0,onChange:function(t){e.setState({levels:t.target.value})},type:"range",min:"1",max:"8",step:"1",value:this.state.levels}),(0,j.jsxs)("label",{className:"col-sm-3 col-form-label  ",children:["value : ",this.state.levels," "]})]})]})})]}),(0,j.jsxs)("div",{className:"row",children:[(0,j.jsx)("div",{className:"col-md-6",children:(0,j.jsxs)(u.Z.Group,{className:"row",children:[(0,j.jsxs)("label",{className:"col-sm-3 col-form-label ",children:["logo"," "]}),(0,j.jsx)("div",{className:"col-sm-9",children:(0,j.jsxs)("div",{className:"custom-file ",children:[(0,j.jsx)(u.Z.Control,{onChange:function(t){e.setState({logo:t.target.files[0]})},disabled:!this.state.user.admin,type:"file",className:"form-control visibility-hidden",id:"customFileLang",lang:"es"}),(0,j.jsxs)("label",{className:"custom-file-label",htmlFor:"customFileLang",children:[null!==this.state.logo?this.state.logo.name:"Upload image","string"===typeof this.state.logo?this.state.logo.split("/")[2]:""]})]})})]})}),(0,j.jsx)("div",{className:"col-md-6",children:(0,j.jsxs)(u.Z.Group,{className:"row",children:[(0,j.jsxs)("label",{className:"col-sm-3 col-form-label ",children:["second logo"," "]}),(0,j.jsx)("div",{className:"col-sm-9",children:(0,j.jsxs)("div",{className:"custom-file ",children:[(0,j.jsx)(u.Z.Control,{onChange:function(t){e.setState({slogo:t.target.files[0]})},disabled:!this.state.user.admin,type:"file",className:"form-control visibility-hidden",id:"customFileLang1",lang:"es"}),(0,j.jsxs)("label",{className:"custom-file-label",htmlFor:"customFileLang1",children:[null!==this.state.slogo?this.state.slogo.name:"Upload image","string"===typeof this.state.slogo?this.state.slogo.split("/")[2]:""]})]})})]})})]}),(0,j.jsxs)("div",{className:"row",children:[(0,j.jsx)("div",{className:"col-md-6 ",children:(0,j.jsxs)(u.Z.Group,{className:" row  ",children:[(0,j.jsx)("label",{className:"col-sm-3 col-form-label control-label",children:"Annual Population Growth Rate"}),(0,j.jsx)("div",{className:"col-sm-9",children:(0,j.jsxs)("div",{className:"input-group ",children:[(0,j.jsx)(u.Z.Control,{disabled:!this.state.user.admin,required:!0,isValid:!0,value:this.state.growthRate,onChange:function(t){var a=t.target.value,l=a.split(".").length;if(console.log(l),l>1){var n=a.split(".")[0],s=a.split(".")[1].slice(0,2);a=n+"."+s,console.log(a)}e.setState({growthRate:parseFloat(a)})},type:"number",className:"form-control","aria-label":"Amount (to the nearest dollar)"}),(0,j.jsx)("div",{className:"input-group-append h-75 pb-3",children:(0,j.jsx)("span",{className:"input-group-text",children:"%"})})]})})]})}),(0,j.jsx)("div",{className:"col-md-6",children:(0,j.jsxs)(u.Z.Group,{className:"row",children:[(0,j.jsx)("label",{className:"col-sm-3 col-form-label ",children:"Main Location"}),(0,j.jsx)("div",{className:"col-sm-9",children:(0,j.jsx)(u.Z.Control,{disabled:!this.state.user.admin,value:this.state.mainlocation,onChange:function(t){e.setState({mainlocation:t.target.value})},type:"text"})})]})})]}),(0,j.jsxs)("div",{className:"row",children:[(0,j.jsx)("div",{className:"col-md-6",children:(0,j.jsxs)(u.Z.Group,{className:"row",children:[(0,j.jsx)("label",{className:"col-sm-5 col-form-label",children:"Enable HR"}),(0,j.jsx)("div",{className:"col-sm-7",children:(0,j.jsx)(u.Z.Check,{disabled:!this.state.user.admin,checked:this.state.enableHR,value:this.state.enableHR,onChange:function(t){e.setState({enableHR:!e.state.enableHR})},type:"switch",label:"",id:"disabled-custom-switch"})})]})}),(0,j.jsx)("div",{className:"col-md-6",children:(0,j.jsxs)(u.Z.Group,{className:"row",children:[(0,j.jsx)("label",{className:"col-sm-5 col-form-label",children:"Enable Maintenance"}),(0,j.jsx)("div",{className:"col-sm-7",children:(0,j.jsx)(u.Z.Check,{checked:this.state.enableMaintaining,disabled:!this.state.user.admin,onChange:function(t){e.setState({enableMaintaining:!e.state.enableMaintaining})},type:"switch",label:"",id:"disabled-custom"})})]})})]}),(0,j.jsxs)("div",{className:"row",children:[(0,j.jsx)("div",{className:"col-md-6",children:(0,j.jsxs)(u.Z.Group,{className:"row",children:[(0,j.jsx)("label",{className:"col-sm-3 col-form-label control-label",children:"Target Population"}),(0,j.jsx)("div",{className:"col-sm-9",children:(0,j.jsxs)(u.Z.Control,{required:!0,disabled:!this.state.user.admin,onChange:function(t){e.setState({targetpopulation:t.target.value})},value:this.state.targetpopulation,className:"form-select",as:"select",children:[(0,j.jsx)("option",{value:"General population",children:"General population"}),(0,j.jsx)("option",{value:"Under-1 Population",children:"Under-1 Population"})]})})]})}),(0,j.jsx)("div",{className:"col-md-6",children:(0,j.jsxs)(u.Z.Group,{className:"row",children:[(0,j.jsx)("label",{className:"col-sm-3 col-form-label ",children:"Require Capacity"}),(0,j.jsx)("div",{className:"col-sm-9",children:(0,j.jsxs)(u.Z.Control,{disabled:!this.state.user.admin,onChange:function(t){var a="true"===t.target.value;e.setState({requiredcapacities:a})},value:this.state.requiredcapacities,className:"form-select",as:"select",children:[(0,j.jsx)("option",{value:!0,children:"Estimate required capacity (in MS Excel)"}),(0,j.jsx)("option",{value:!1,children:"Enter required capacity manually"})]})})]})})]}),(0,j.jsx)("div",{className:"col-md-6",children:(0,j.jsxs)(u.Z.Group,{className:"row",children:[(0,j.jsx)("label",{className:"col-sm-3 col-form-label ",children:"Main Location"}),(0,j.jsx)("div",{className:"map",children:(0,j.jsx)(w,{loca:this.state.mainlocation,handleChange:this.handlemapclick})})]})}),this.state.country!==[]&&void 0!==this.state.country&&this.state.user.admin?(0,j.jsx)("button",{type:"submit",className:"btn btn-primary mr-2",children:"Save"}):(0,j.jsx)("button",{type:"submit",disabled:!0,className:"btn btn-primary mr-2",children:"Save"})]})]})})})})]})}}]),a}(d.Component),k=Z}}]);
//# sourceMappingURL=1713.b47e83df.chunk.js.map