"use strict";(self.webpackChunkinventory=self.webpackChunkinventory||[]).push([[414],{30027:function(e,t,n){var i=n(16149),a=n(78083),l=n(80184);t.Z=function(e){var t,n=e.field,s=e.onChangeHandler,r=e.defaultValue,c=e.separator;if("select"===n.type)return(0,l.jsxs)(i.Z.Control,{onChange:function(e){return s(e.target.value,n)},defaultValue:r,className:"form-control",as:"select",disabled:n.active?!n.active:n.disabled,id:"field-".concat(n.id),children:[(0,l.jsx)("option",{value:"",selected:!0,disabled:!0,children:"Please select"}),n.params.map((function(e){return(0,l.jsx)("option",{disabled:e.enabled?!e.enabled:e.active?!e.active:!e.enable,value:e.id,children:e.name||e.describe})}))]});if("bool"===n.type)return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("input",{type:"checkbox",defaultChecked:r,onChange:function(e){return s(e.target.checked,n)},disabled:n.active?!n.active:n.disabled}),(0,l.jsx)("i",{style:{marginLeft:"5px"},children:" checked: yes "})]});var d=null===(t=n.validation)||void 0===t?void 0:t[0];return(0,l.jsx)(i.Z.Control,{onKeyPress:function(e){if(e.persist(),"number"===n.type)if(d&&null!==d&&void 0!==d&&d.float){if(-1==="0123456789.:".indexOf(e.key))return void e.preventDefault()}else if(d&&!1===(null===d||void 0===d?void 0:d.float)&&-1==="0123456789".indexOf(e.key))return void e.preventDefault();s(e.target.value,n)},onChange:function(e){return s(e.target.value,n)},value:r,className:"form-control",id:"field-".concat(n.id),disabled:n.active?!n.active:n.disabled,min:d&&-1!==(null===d||void 0===d?void 0:d.min)?d.min:void 0,max:d&&-1!==(null===d||void 0===d?void 0:d.max)?d.max:void 0,step:d&&null!==d&&void 0!==d&&d.float?Math.pow(.1,d.floating).toFixed(d.floating):void 0,maxLength:d&&-1!==(null===d||void 0===d?void 0:d.digits)?d.digits:void 0,onBlur:function(e){if(e.persist(),c){var t=(0,a.k)(e.target.value);s(t,n)}}})}},38275:function(e,t,n){n.d(t,{Z:function(){return d}});n(72791);var i=n(64554),a=n(36151),l=n(30606),s=n(80184);var r=function(){return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("svg",{version:"1.1",id:"Capa_1",x:"0px",y:"0px",width:"20px",height:"20px",viewBox:"0 0 400 400",children:(0,s.jsx)("path",{fill:"currentColor",d:"M382.688,182.686H59.116l77.209-77.214c6.764-6.76,6.764-17.726,0-24.485c-6.764-6.764-17.73-6.764-24.484,0L5.073,187.757 c-6.764,6.76-6.764,17.727,0,24.485l106.768,106.775c3.381,3.383,7.812,5.072,12.242,5.072c4.43,0,8.861-1.689,12.242-5.072 c6.764-6.76,6.764-17.726,0-24.484l-77.209-77.218h323.572c9.562,0,17.316-7.753,17.316-17.315 C400.004,190.438,392.251,182.686,382.688,182.686z"})})})};var c=function(){return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("svg",{version:"1.1",id:"Capa_1",x:"0px",y:"0px",width:"20px",height:"20px",viewBox:"0 0 1024 1024",children:(0,s.jsx)("path",{fill:"currentColor",d:"M754.752 480H160a32 32 0 100 64h594.752L521.344 777.344a32 32 0 0045.312 45.312l288-288a32 32 0 000-45.312l-288-288a32 32 0 10-45.312 45.312L754.752 480z"})})})};var d=function(e){var t=e.activeStep,n=e.handleBack,d=e.handleNext,o=e.stepsLength,u=e.isNextDisabled;return(0,s.jsx)("div",{className:"row mt-2",children:(0,s.jsxs)(i.Z,{sx:{display:"flex",flexDirection:"row",pt:2},children:[(0,s.jsxs)(a.Z,{color:"inherit",disabled:0===t,onClick:n,sx:{mr:1},type:"button",children:[(0,s.jsx)(r,{sx:{mr:2}}),(0,s.jsx)(l.c,{children:"Back"})]}),(0,s.jsx)(i.Z,{sx:{flex:"1 1 auto"}}),t===o?(0,s.jsx)("button",{className:"btn btn-primary ",children:"Save"}):(0,s.jsxs)(a.Z,{disabled:u,onClick:d,type:"button",sx:{mr:1},children:[(0,s.jsx)(l.c,{children:"Next"}),(0,s.jsx)(c,{})]})]})})}},78083:function(e,t,n){n.d(t,{k:function(){return i}});var i=function(e){if(void 0!==e&&null!==e)return function(e,t){function n(e){return e.split("").reverse().join("")}var i=/(\d{3}(?!.*\.|$))/g;t||(t=" ");return n(n(e.toString()).replace(i,"$1"+t))}(e=parseInt(e))}},95804:function(e,t,n){n.d(t,{D:function(){return a},q:function(){return l}});var i=n(78083),a=function(e,t){if(console.log(typeof e),"string"!==typeof e&&"number"!==typeof e)return!1;var n=e.replaceAll(" ","");return!(void 0===t||!n)&&(-1!==t.min&&t.min>n?"value must greater than ".concat((0,i.k)(t.min)):-1!==t.max&&t.max<n?"value must less than ".concat((0,i.k)(t.max)):t.float&&n.includes(".")&&(+n).toFixed(t.floating)>n?"value must has ".concat(t.floating," decimals"):-1!==t.digits&&n.toString().replaceAll(",","").replaceAll(".","").replaceAll(":","").length>t.digits+(t.floating>0?t.floating:0)&&"value must be ".concat(t.digits," digits"))},l=function(e){return!/^([0-1]?[0-9]|2[0-4]):([0-5][0-9])(:[0-5][0-9])?$/.test(e)&&"value must be in (hh:mm) format!"}},50414:function(e,t,n){n.r(t),n.d(t,{default:function(){return P}});var i=n(37762),a=n(74165),l=n(1413),s=n(15861),r=n(29439),c=n(72791),d=n(91933),o=n(79271),u=n(59909),m=n(70242),v=n(74512),f=n(15825),x=n(16149),h=n(74936),p=n(30027),j=[{id:"PQSPISCode",name:"PQS/PIS Code:",topic:"",type:"text",active:!0,disabled:!1,required:!1,state:"PQSPISCode",params:[]},{id:"PQSPISType",name:"PQS/PIS-Type:",topic:"",type:"text",active:!0,disabled:!1,required:!1,state:"PQSPISType",params:[]},{id:"PQSPISManufacturer",name:"PQS/PIS-Manufacturer",topic:"",type:"text",active:!0,disabled:!1,required:!1,state:"PQSPISManufacturer",params:[]},{id:"PQSPISRefrigerantGas",name:"PQS/PIS-Refrigerant gas",topic:"",type:"text",active:!0,disabled:!1,required:!1,state:"PQSPISRefrigerantGas",params:[]}],g=n(95804),y=n(30606),b=n(87671),Z=n(38275),S=n(80184),N={id:"facility",type:"text",active:!1,disabled:!0,state:"facility",name:""};var P=function(){var e,t,n=(0,c.useState)(0),P=(0,r.Z)(n,2),I=P[0],C=P[1],k=(0,c.useState)({}),w=(0,r.Z)(k,2),Q=w[0],q=w[1],_=(0,c.useState)({}),O=(0,r.Z)(_,2),L=O[0],A=O[1],H=(0,c.useState)(null),G=(0,r.Z)(H,2),M=G[0],D=G[1],F=(0,c.useState)(null),B=(0,r.Z)(F,2),T=B[0],R=B[1],V=(0,c.useState)(!1),U=(0,r.Z)(V,2),$=U[0],z=U[1],E=(0,o.UO)().id,K=(0,o.k6)(),J=new URLSearchParams(K.location.search).get("parent"),W=(0,d.useQuery)(["item-default-value",E],(0,s.Z)((0,a.Z)().mark((function e(){var t,n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t={code:"Unique code generated by IGA"},"new"!==E){e.next=3;break}return e.abrupt("return",t);case 3:return e.next=5,h.Z.getItems(E);case 5:return n=e.sent,e.abrupt("return",(0,l.Z)((0,l.Z)({},n.data[1]),t));case 7:case"end":return e.stop()}}),e)}))),{refetchOnMount:!0,onSuccess:function(e){q(e)}}).isLoading,X=(0,d.useQuery)(["item-classes-and-types"],(0,s.Z)((0,a.Z)().mark((function e(){var t;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.Z.getItemClassesAndTypes();case 2:return t=e.sent,q((function(e){return(0,l.Z)((0,l.Z)({},e),{},{facility:t.data.facility})})),e.abrupt("return",t.data.data.filter((function(e){return e.item_type.length>0})));case 5:case"end":return e.stop()}}),e)}))),{refetchOnMount:!0,onSuccess:function(e){var t,n;D(e[0]),R(null===(t=e[0])||void 0===t||null===(n=t.item_type)||void 0===n?void 0:n[0])}}),Y=X.data,ee=X.isLoading,te=(0,d.useQuery)(["pqs",null===T||void 0===T?void 0:T.id],(0,s.Z)((0,a.Z)().mark((function e(){var t,n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.Z.getPQS(null===T||void 0===T?void 0:T.id);case 2:return n=e.sent,e.abrupt("return",null===n||void 0===n||null===(t=n.data)||void 0===t?void 0:t.map((function(e){var t;return{label:null!==(t=e.pqsnumber)&&void 0!==t?t:e.pqscode,value:e}})));case 4:case"end":return e.stop()}}),e)}))),{refetchOnMount:!0}),ne=te.data,ie=te.isLoading,ae=(0,d.useQuery)(["item-fields",null===M||void 0===M?void 0:M.item_class.id,null===T||void 0===T?void 0:T.id,J],(0,s.Z)((0,a.Z)().mark((function e(){var t,n,l,s,r,c,d,o,u;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.Z.getItemFields(M.item_class.id,T.id,J);case 2:if(t=e.sent,n={},t.data.fields){s=(0,i.Z)(t.data.fields);try{for(s.s();!(r=s.n()).done;)d=r.value,(o=null!==(c=n[d.field.topic])&&void 0!==c?c:[]).push(d.field),n[d.field.topic]=o}catch(a){s.e(a)}finally{s.f()}u=null!==(l=Object.keys(n)[0])&&void 0!==l?l:"Type",void 0===n[u]&&(n[u]=[]),n[u].unshift({id:"code",name:"Item code:",topic:u,type:"text",active:!1,disabled:!0,required:!1,state:"code",params:[]})}return e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)}))),{enabled:!!T}),le=ae.data,se=ae.isLoading,re=ae.isIdle,ce=ae.refetch;(0,c.useEffect)((function(){T&&ce()}),[T]);var de=function(){var e=(0,l.Z)({},L);return Object.values(le)[I].forEach((function(t){t.required&&!Q[t.state]&&(e[t.state]="this field is required!")})),A(e),Object.keys(e).length>0},oe=function(){de()||C((function(e){return e+1}))},ue=function(){C((function(e){return e-1}))},me=function(e,t){var n,i=(0,g.D)(e,null===(n=t.validation)||void 0===n?void 0:n[0]),a=(0,l.Z)({},Q);a[t.state]=e,q(a);var s=(0,l.Z)({},L);i?s[t.state]=i:delete s[t.state],A(s)},ve=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(t){var n,i,s;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!de()){e.next=3;break}return e.abrupt("return");case 3:if(n=(0,l.Z)({},Q),!$)for(s in i=function(e){j.find((function(t){return t.state===e}))&&delete n[e]},Q)i(s);return n.item_class=M.item_class.id,n.item_type=T.id,n.facility=n.facility.id,e.next=10,"new"===E?h.Z.postItem(n):h.Z.putItem(n);case 10:e.sent,q(n);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),fe=function(){var e,t,n=null===(e=ne.find((function(e){return e.label===Q.PQSPISCode})))||void 0===e?void 0:e.value;if(void 0!==n){var i=(0,l.Z)({},Q),a=ne.find((function(e){return e.id===n}));i.PQSPISType=null===a||void 0===a?void 0:a.model,i.PQSPISManufacturer=null!==(t=null===a||void 0===a?void 0:a.manufacturer)&&void 0!==t?t:null===a||void 0===a?void 0:a.make,i.PQSPISRefrigerantGas=null===a||void 0===a?void 0:a.refrigerant,q(i)}};return W||ee||se||re||ie?(0,S.jsx)(u.Z,{}):(0,S.jsxs)("form",{onSubmit:ve,children:[(0,S.jsx)("h3",{className:"page-title mb-3",children:(0,S.jsx)(y.c,{children:"Item information"})}),(0,S.jsx)("div",{className:"mt-3",children:(0,S.jsx)("div",{className:"card",children:(0,S.jsxs)("div",{className:"card-body pb-3",children:[(0,S.jsx)("div",{className:"row pb-4",style:{overflow:"auto"},children:(0,S.jsx)(m.Z,{activeStep:I,children:Object.keys(le).map((function(e){return(0,S.jsx)(v.Z,{children:(0,S.jsx)(f.Z,{style:{width:"max-content"},children:e})},e)}))})}),(0,S.jsx)(Z.Z,{handleBack:ue,handleNext:oe,activeStep:I,stepsLength:Object.keys(le).length-1,isNextDisabled:Object.keys(L).length>0})]})})}),(0,S.jsx)("div",{className:"mt-3",children:(0,S.jsx)("div",{className:"card",children:(0,S.jsxs)("div",{className:"card-body pb-3",children:[(0,S.jsx)("div",{className:"row",children:(0,S.jsxs)(x.Z.Group,{className:"row mb-0",children:[(0,S.jsx)("label",{className:"col-sm-4 text-right",style:{display:"flex",justifyContent:"flex-end",alignItems:"center",lineHeight:"1.4",textAlign:"right"},children:"Facility Name:"}),(0,S.jsx)("div",{className:"col-sm-8",children:(0,S.jsx)(p.Z,{field:N,defaultValue:null===(e=Q.facility)||void 0===e?void 0:e.name})})]})}),(0,S.jsx)("div",{className:"row mt-3",children:(0,S.jsxs)(x.Z.Group,{className:"row mb-0",children:[(0,S.jsx)("label",{className:"col-sm-4 text-left control-label",style:{display:"flex",justifyContent:"flex-end",alignItems:"center",lineHeight:"1.4",textAlign:"right"},children:(0,S.jsx)(y.c,{children:"Item class"})}),(0,S.jsx)("div",{className:"col-sm-8",children:(0,S.jsx)(x.Z.Control,{onChange:function(e){D(Y[e.target.value]),R(M.item_type[0])},className:"form-select",as:"select",value:null===Y||void 0===Y?void 0:Y.findIndex((function(e){return(null===e||void 0===e?void 0:e.item_class.id)===(null===M||void 0===M?void 0:M.item_class.id)})),disabled:0!==I,children:Y.map((function(e,t){return(0,S.jsx)("option",{value:t,children:e.item_class.title})}))})})]})}),(0,S.jsx)("div",{className:"row mt-3",children:(0,S.jsxs)(x.Z.Group,{className:"row mb-0",children:[(0,S.jsx)("label",{className:"col-sm-4 text-right control-label",style:{display:"flex",justifyContent:"flex-end",alignItems:"center",lineHeight:"1.4",textAlign:"right"},children:(0,S.jsx)(y.c,{children:"Item Category"})}),(0,S.jsx)("div",{className:"col-sm-8",children:(0,S.jsx)(x.Z.Control,{onChange:function(e){R(M.item_type[e.target.value])},className:"form-select",as:"select",value:null===M||void 0===M?void 0:M.item_type.findIndex((function(e){return(null===e||void 0===e?void 0:e.id)===(null===T||void 0===T?void 0:T.id)})),disabled:0!==I,children:null===M||void 0===M?void 0:M.item_type.map((function(e,t){return(0,S.jsx)("option",{value:t,children:e.title})}))})})]})})]})})}),(0,S.jsx)("div",{className:"mt-3",children:(0,S.jsx)("div",{className:"card",children:(0,S.jsxs)("div",{className:"card-body",children:[0===I&&(0,S.jsx)(S.Fragment,{children:T.havepqs&&(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)("div",{className:"row",children:(0,S.jsxs)(x.Z.Group,{className:"row mb-0",children:[(0,S.jsx)("label",{className:"col-sm-4 text-right",style:{display:"flex",justifyContent:"flex-end",alignItems:"center",lineHeight:"1.4",textAlign:"right"},children:(0,S.jsx)(y.c,{children:"Is this item from PQS/PIS list?"})}),(0,S.jsx)("div",{className:"col-sm-6",children:(0,S.jsx)("input",{name:"is-from-pqs",type:"checkbox",onChange:function(){z((function(e){return!e}))},checked:$})}),(0,S.jsx)("hr",{className:"my-3"})]})}),$&&j.map((function(e){var t;return(0,S.jsx)("div",{className:"row",children:(0,S.jsxs)(x.Z.Group,{className:"row mb-0",children:[(0,S.jsx)("label",{className:"col-sm-4 text-right ".concat(e.required?"control-label":""),style:{display:"flex",justifyContent:"flex-end",alignItems:"center",lineHeight:"1.4",textAlign:"right"},children:e.name}),(0,S.jsx)("div",{className:"".concat("PQSPISCode"===e.state?"col-sm-7":"col-sm-8"),children:ne&&"PQSPISCode"===e.state?(0,S.jsx)(b.ZP,{options:ne,onChange:function(t){me(t.label,e)},value:{label:Q.PQSPISCode,value:null===(t=ne.find((function(e){return e.label===Q.PQSPISCode})))||void 0===t?void 0:t.value},onBlur:function(t){var n=t.target.value;n.length>0&&me(n,e)}}):(0,S.jsx)(p.Z,{field:e,onChangeHandler:me,defaultValue:Q[e.state]})}),"PQSPISCode"===e.state&&(0,S.jsx)("div",{className:"col-sm-1",children:(0,S.jsx)("button",{className:"btn btn-primary w-100 h-100",onClick:fe,type:"button",children:(0,S.jsx)(y.c,{children:"Load"})})}),(0,S.jsx)("hr",{className:"my-3"})]})},e.name)}))]})}),null===(t=Object.values(le)[I])||void 0===t?void 0:t.map((function(e){var t=!!L[e.state];return(0,S.jsx)("div",{className:"row",children:(0,S.jsxs)(x.Z.Group,{className:"row mb-0",children:[(0,S.jsx)("label",{className:"col-sm-4 text-right ".concat(e.required?"control-label":""),style:{display:"flex",justifyContent:"flex-end",alignItems:"center",lineHeight:"1.4",textAlign:"right"},children:e.name}),(0,S.jsx)("div",{className:"col-sm-8",children:(0,S.jsx)(p.Z,{field:e,onChangeHandler:me,defaultValue:Q[e.state]})}),t&&(0,S.jsxs)("div",{className:"row",children:[(0,S.jsx)("div",{className:"col-sm-4"}),(0,S.jsx)("div",{className:"col-sm-8",children:(0,S.jsx)("p",{className:"my-1 ml-2 text-danger",children:L[e.state]})})]}),(0,S.jsx)("hr",{className:"my-3"})]})},e.name)}))]})})}),(0,S.jsx)("div",{className:"mt-3",children:(0,S.jsx)("div",{className:"card",children:(0,S.jsx)("div",{className:"card-body py-3",children:(0,S.jsx)(Z.Z,{handleBack:ue,handleNext:oe,activeStep:I,stepsLength:Object.keys(le).length-1,isNextDisabled:Object.keys(L).length>0})})})})]})}}}]);
//# sourceMappingURL=414.a21a373a.chunk.js.map