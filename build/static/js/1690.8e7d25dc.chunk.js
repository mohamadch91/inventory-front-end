"use strict";(self.webpackChunkinventory=self.webpackChunkinventory||[]).push([[1690],{91690:function(e,n,s){s.r(n),s.d(n,{default:function(){return q}});var t=s(29439),i=s(72791),l=s(74165),a=s(15861),r=s(16149),c=s(30606),o=s(80184),d={display:"flex",justifyContent:"flex-start",alignItems:"center",lineHeight:"1.4"},u=function(e){return(0,o.jsxs)(r.Z.Group,{className:"row mb-0",children:[(0,o.jsx)("label",{className:"col-sm-3 text-right ".concat(e.isRequired?"control-label":""),style:d,children:(0,o.jsxs)(c.c,{children:[" ",e.label," "]})}),(0,o.jsx)("div",{className:"col-sm-7",children:(0,o.jsxs)(r.Z.Control,{size:"sm",onChange:function(n){e.onChange(n)},className:"form-select",as:"select",children:[(0,o.jsx)("option",{value:"-1",children:"Please select"}),e.options.map((function(e){return(0,o.jsx)("option",{value:e.id,children:e.op},e.id)}))]})}),(0,o.jsx)("hr",{className:"my-3 "})]})},m=function(e){return(0,o.jsx)("div",{className:"form-check pl-2 mx-3 ",children:(0,o.jsxs)("label",{className:"form-check-label",children:[(0,o.jsx)("input",{onChange:e.onChange,type:"checkbox",className:"form-check-input"}),(0,o.jsx)("i",{className:"input-helper"}),(0,o.jsx)(c.c,{children:e.label})]})})},h=function(e){return(0,o.jsxs)(r.Z.Group,{className:"pt-1 row",children:[(0,o.jsxs)("label",{className:"py-2",children:[" ",(0,o.jsx)(c.c,{children:"Years Installed:"})," "]}),(0,o.jsx)(r.Z.Control,{style:{width:"100%"},type:"number",className:"form-control col-sm-3 mt-2 ml-3",placeholder:"from","aria-label":"from-year",onChange:e.onFromChange}),(0,o.jsx)(r.Z.Control,{style:{width:"100%"},type:"number",className:"form-control mt-2 col-sm-3 ml-3",placeholder:"to","aria-label":"from-year",onChange:e.onToChange})]})},p=function(e){return(0,o.jsxs)(r.Z.Group,{className:"ml-2 w-100",children:[(0,o.jsxs)("label",{className:"py-2",children:[" ",(0,o.jsx)(c.c,{children:"Item Code"})," "]}),(0,o.jsx)(r.Z.Control,{style:{width:"50%"},type:"text",className:"form-control mt-2 ",placeholder:"ABC05","aria-label":"from-year",onChange:e.onChange})]})},x=s(91933),f=s(74936),j=s(59909),v=s(4942),y=s(1413),g=function(e,n){return"CHANGE"===n.type?(0,y.Z)((0,y.Z)({},e),{},(0,v.Z)({},n.field,n.value)):{facility:-1,item_class:-1,item_type:-1,physical:-1,working:-1,user:-1,year_from:-1,year_to:-1,code:-1,func:!1}},N=s(65218),C=s(11175),Z=function(e){var n=(0,i.useState)([]),s=(0,t.Z)(n,2),r=s[0],d=s[1],v=(0,i.useReducer)(g,{}),y=(0,t.Z)(v,2),Z=y[0],b=y[1],_=(0,x.useQuery)([],(0,a.Z)((0,l.Z)().mark((function e(){var n;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.Z.getQrHelper();case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)}))),{refetchOnMount:!0}),R=_.data;if(_.isLoading||0===R.length)return(0,o.jsx)(j.Z,{});var w=R.facility.map((function(e){return{id:e.id,op:e.name}})),I=R.items.map((function(e){return{id:e.item_class.id,op:e.item_class.title}})),A=R.working.map((function(e){return{id:e.id,op:e.name}})),G=R.physical.map((function(e){return{id:e.id,op:e.name}})),k=R.users.map((function(e){return{id:e.id,op:e.name}}));return console.log(Z),(0,o.jsxs)("div",{className:"row",children:[(0,o.jsxs)("div",{className:"col-sm-7",children:[(0,o.jsx)(u,{isRequired:!0,label:"Main Facility",options:w,onChange:function(e){b({type:"CHANGE",field:"facility",value:e.target.value})}},"A"),(0,o.jsx)(u,{label:"Item class",options:I,onChange:function(e){b({type:"CHANGE",field:"item_class",value:e.target.value});var n=[],s=e.target.value;R.items.map((function(e){e.item_class.id===+s&&e.item_type.map((function(e){n.push({id:e.id,op:e.title})}))})),d(n)}},"B"),(0,o.jsx)(u,{label:"Item type",options:r,onChange:function(e){b({type:"CHANGE",field:"item_type",value:e.target.value})}},"C"),(0,o.jsx)(u,{label:"Working status",options:A,onChange:function(e){b({type:"CHANGE",field:"working",value:e.target.value})}},"D"),(0,o.jsx)(u,{label:"Physical condition",options:G,onChange:function(e){b({type:"CHANGE",field:"physical",value:e.target.value})}},"E"),(0,o.jsx)(u,{label:"User",options:k,onChange:function(e){b({type:"CHANGE",field:"user",value:e.target.value})}},"F")]}),(0,o.jsxs)("div",{className:"col-sm-4 ",children:[(0,o.jsx)("div",{className:C.Z.inputResponsive,children:(0,o.jsx)(h,{onFromChange:function(e){b({type:"CHANGE",field:"year_from",value:e.target.value})},onToChange:function(e){b({type:"CHANGE",field:"year_to",value:e.target.value})}})}),(0,o.jsx)("hr",{className:"my-1"}),(0,o.jsx)("div",{children:(0,o.jsx)(p,{onChange:function(e){b({type:"CHANGE",field:"code",value:e.target.value})},className:C.Z.codeInputResponsive})}),(0,o.jsx)("hr",{className:"my-1"}),(0,o.jsx)(m,{onChange:function(e){b({type:"CHANGE",field:"func",value:e.target.checked})},label:"Is functioning"}),(0,o.jsx)("button",{onClick:function(){void 0!==Z.facility&&"-1"!==Z.facility||N.ZP.error("Please select a facility"),e.onSubmit(Z)},type:"button",className:"btn btn-primary btn-fw mt-3  ".concat(C.Z.buttonResponsive),children:(0,o.jsx)(c.c,{children:"Search QR code"})})]})]})},b=s(23821),_=(s(93650),s(56890)),R=s(35855),w=s(53994),I=s(53382),A=s(22057),G=function(e){return(0,o.jsxs)("tr",{children:[(0,o.jsx)(w.Z,{className:"col-sm-2",children:null===e||void 0===e?void 0:e.itemClass}),(0,o.jsx)(w.Z,{className:"col-sm-2",children:null===e||void 0===e?void 0:e.itemType}),(0,o.jsx)(w.Z,{className:"col-sm-2",children:null===e||void 0===e?void 0:e.pqsCode}),(0,o.jsx)(w.Z,{className:"col-sm-2",children:null===e||void 0===e?void 0:e.code}),(0,o.jsx)(w.Z,{className:"qr",children:(0,o.jsx)(A.tv,{value:null===e||void 0===e?void 0:e.qr,size:128})})]})},k=i.forwardRef((function(e,n){var s,t=(0,x.useQuery)(["filter",e.queryString],(0,a.Z)((0,l.Z)().mark((function n(){var s;return(0,l.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,f.Z.getQrTableData(e.queryString);case 2:return s=n.sent,console.log(s.data),n.abrupt("return",null===s||void 0===s?void 0:s.data);case 5:case"end":return n.stop()}}),n)}))),{refetchOnMount:!0}),i=t.data;if(t.isLoading)return(0,o.jsx)(j.Z,{});if(0===i.length)return(0,o.jsx)("div",{className:"alert alert-danger w-50 text-center m-auto",role:"alert",children:(0,o.jsx)("p",{className:"display-4",children:(0,o.jsx)(c.c,{children:"Could not find any data with the information provided \ud83d\ude1f"})})});var r=i.map((function(e,n){return(0,o.jsx)(G,{itemClass:null===e||void 0===e?void 0:e.item_class,itemType:null===e||void 0===e?void 0:e.item_type,pqsCode:null===e||void 0===e?void 0:e.pqs_code,code:null===e||void 0===e?void 0:e.code,qr:null===e||void 0===e?void 0:e.qr},n)}));return(0,o.jsxs)("div",{ref:n,className:"mt-5 ",style:{color:"#000"},children:[(0,o.jsxs)("div",{className:"text-center",children:[(0,o.jsx)("div",{children:(0,o.jsx)("h4",{children:(0,o.jsx)(c.c,{children:"Inventory and Gap Analysis System (IGA)"})})}),(0,o.jsx)("div",{children:(0,o.jsx)("h4",{children:null===(s=JSON.parse(localStorage.getItem("country")))||void 0===s?void 0:s.country})})]}),(0,o.jsx)("div",{className:"card mt-4",children:(0,o.jsx)("div",{className:"card-body p-3 ",children:(0,o.jsx)("div",{className:"table-container-to-print",children:(0,o.jsxs)(b.Z,{children:[(0,o.jsx)(_.Z,{children:(0,o.jsxs)(R.Z,{children:[(0,o.jsx)(w.Z,{className:"col-sm-2",children:(0,o.jsx)(c.c,{children:(0,o.jsx)(c.c,{children:"Item class"})})}),(0,o.jsx)(w.Z,{className:"col-sm-2",children:(0,o.jsx)(c.c,{children:(0,o.jsx)(c.c,{children:"Item category"})})}),(0,o.jsx)(w.Z,{className:"col-sm-2",children:(0,o.jsx)(c.c,{children:(0,o.jsx)(c.c,{children:"Model"})})}),(0,o.jsx)(w.Z,{className:"col-sm-2",children:(0,o.jsx)(c.c,{children:(0,o.jsx)(c.c,{children:"code"})})}),(0,o.jsx)(w.Z,{className:"col-sm-2",children:(0,o.jsx)(c.c,{children:"QR Code"})})]})}),(0,o.jsx)(I.Z,{children:r})]})})})})]})})),E=s(61146),H=s.n(E),q=function(){var e=(0,i.useState)(),n=(0,t.Z)(e,2),s=n[0],l=n[1],a=(0,i.useRef)();return(0,o.jsxs)(i.Fragment,{children:[(0,o.jsx)(Z,{onSubmit:function(e){var n="";for(var s in e)"-1"!==e[s]&&(n+=s+"="+e[s]+"&");l(n)}}),s&&(0,o.jsxs)("div",{children:[(0,o.jsx)(H(),{trigger:function(){return(0,o.jsx)("div",{className:"d-flex justify-content-center py-3",children:(0,o.jsxs)("button",{className:"btn btn-info btn-icon-text ",children:["Print ",(0,o.jsx)("i",{className:"mdi mdi-printer btn-icon-append"})]})})},content:function(){return a.current},documentTitle:"IGA Reports"}),(0,o.jsx)(k,{ref:a,queryString:s})]})]})}},23821:function(e,n,s){var t=s(39281),i=s(79836),l=s(80184);n.Z=function(e){var n=e.children;return(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(t.Z,{children:(0,l.jsx)(i.Z,{children:n})})})}},11175:function(e,n){n.Z={inputResponsive:"ItemsQR_inputResponsive__ShY-3",codeInputResponsive:"ItemsQR_codeInputResponsive__iEFAF",buttonResponsive:"ItemsQR_buttonResponsive__OgujR",scanPage:"ItemsQR_scanPage__1C9Ao"}},93650:function(){}}]);
//# sourceMappingURL=1690.8e7d25dc.chunk.js.map