{"version":3,"file":"static/js/8122.f33f11b3.chunk.js","mappings":"+PAgHA,UAtGA,WACE,OAAkCA,EAAAA,EAAAA,WAAS,GAA3C,eAAOC,EAAP,KAAkBC,EAAlB,KACA,GAAoCF,EAAAA,EAAAA,UAAS,IAA7C,eAAOG,EAAP,KAAmBC,EAAnB,KACA,GAAgCJ,EAAAA,EAAAA,YAAhC,eAAOK,EAAP,KAAiBC,EAAjB,KACA,GAAgCN,EAAAA,EAAAA,UAAS,IAAzC,eAAOO,EAAP,KAAiBC,EAAjB,KAoBA,SAASC,EAAaC,GACpB,MAAwBA,EAAEC,OAAlBC,EAAR,EAAQA,KAAMC,EAAd,EAAcA,MACdP,GAAY,kBAAKD,GAAN,cAAiBO,EAAOC,IACpC,CAyBD,OAhCAC,EAAAA,EAAAA,YAAU,WAbRC,EAAAA,EAAAA,gBACGC,MAAK,SAACC,GACL,IAAMC,EAAOD,EAAIC,KACjBd,EAAcc,GACdhB,GAAa,EACd,IACAiB,OAAM,SAACC,GACNC,EAAAA,GAAAA,OAAY,SAAC,IAAD,+CAEZnB,GAAa,EACd,GAKJ,GAAE,KA+BD,gBAAKoB,UAAU,mBAAf,SACGrB,GACC,SAAC,IAAD,KAEA,gBAAKqB,UAAU,YAAf,UACE,kBAAMC,SA7Bd,SAAsBb,GAEpB,GADAA,EAAEc,iBACsB,IAApBjB,EAASkB,OACXJ,EAAAA,GAAAA,OAAY,SAAC,IAAD,uDACP,CACL,IACMH,EAAO,CACXQ,QAFwBrB,EAAlBqB,QAGNC,KAHwBtB,EAATsB,KAIfC,SAAUrB,EAASsB,KAAI,SAACC,GAAD,OAAUA,EAAKjB,KAAf,KAEzBE,EAAAA,EAAAA,YAA2BG,GACxBF,MAAK,SAACC,GACLI,EAAAA,GAAAA,SAAc,SAAC,IAAD,yCACdf,EAAY,CAAC,GACbE,EAAY,GACb,IACAW,OAAM,SAACC,GACNC,EAAAA,GAAAA,OAAY,SAAC,IAAD,iDACb,GACJ,CACF,EAQO,WACE,eAAIC,UAAU,kBAAd,UACE,SAAC,IAAD,8BAEF,iBAAKA,UAAU,qBAAf,WACE,4BACE,SAAC,IAAD,2BAEF,SAAC,KAAD,CACES,QAAS5B,EAAW0B,KAAI,SAACC,GACvB,MAAO,CAAEE,MAAOF,EAAKlB,KAAMC,MAAOiB,EAAKG,GACxC,IACDpB,MAAON,EACP2B,SAAU1B,EACV2B,WAAW,SACXb,UAAU,qBAGd,iBAAKA,UAAU,qBAAf,WACE,4BACE,SAAC,IAAD,yBAEF,kBACEY,SAAUzB,EACV2B,KAAK,OACLxB,KAAK,UACLyB,UAAQ,QAGZ,iBAAKf,UAAU,qBAAf,WACE,4BACE,SAAC,IAAD,8BAEF,qBAAUY,SAAUzB,EAAcG,KAAK,OAAOyB,UAAQ,QAExD,mBAAQD,KAAK,SAASd,UAAU,sBAAhC,UACE,SAAC,IAAD,2BAOb,C","sources":["app/message/newMessage.js"],"sourcesContent":["import { useEffect, useState } from \"react\";\nimport MessageService from \"../services/message.service\";\nimport toast from \"react-hot-toast\";\nimport Spinner from \"../shared/Spinner\";\nimport { MultiSelect } from \"react-multi-select-component\";\nimport \"../styles/inputs.scss\";\nimport \"./message.scss\";\nimport \"../settings/itemClass.scss\";\nimport { Trans } from \"react-i18next\";\n\nfunction NewMessage() {\n  const [isLoading, setIsLoading] = useState(true);\n  const [facilities, setFacilities] = useState([]);\n  const [formData, setFormData] = useState();\n  const [selected, setSelected] = useState([]);\n\n  function getFacilities() {\n    MessageService.getfacilities()\n      .then((res) => {\n        const data = res.data;\n        setFacilities(data);\n        setIsLoading(false);\n      })\n      .catch((err) => {\n        toast.error(<Trans>There is a problem loading data</Trans>);\n\n        setIsLoading(false);\n      });\n  }\n\n  useEffect(() => {\n    getFacilities();\n  }, []);\n\n  function handleChange(e) {\n    const { name, value } = e.target;\n    setFormData({ ...formData, [name]: value });\n  }\n\n  function handleSubmit(e) {\n    e.preventDefault();\n    if (selected.length === 0) {\n      toast.error(<Trans>Please select at least one facility</Trans>);\n    } else {\n      const { subject, body } = formData;\n      const data = {\n        subject,\n        body,\n        reciever: selected.map((item) => item.value),\n      };\n      MessageService.sendMessage(data)\n        .then((res) => {\n          toast.success(<Trans>Message sent successfully</Trans>);\n          setFormData({});\n          setSelected([]);\n        })\n        .catch((err) => {\n          toast.error(<Trans>There is a problem sending message</Trans>);\n        });\n    }\n  }\n\n  return (\n    <div className=\"new-message-page\">\n      {isLoading ? (\n        <Spinner />\n      ) : (\n        <div className=\"container\">\n          <form onSubmit={handleSubmit}>\n            <h3 className=\"mb-1 page-title\">\n              <Trans>Send message</Trans>\n            </h3>\n            <div className=\"d-flex flex-column\">\n              <label>\n                <Trans>Receivers</Trans>\n              </label>\n              <MultiSelect\n                options={facilities.map((item) => {\n                  return { label: item.name, value: item.id };\n                })}\n                value={selected}\n                onChange={setSelected}\n                labelledBy=\"Select\"\n                className=\"multi-select\"\n              />\n            </div>\n            <div className=\"d-flex flex-column\">\n              <label>\n                <Trans>Subject</Trans>\n              </label>\n              <input\n                onChange={handleChange}\n                type=\"text\"\n                name=\"subject\"\n                required\n              />\n            </div>\n            <div className=\"d-flex flex-column\">\n              <label>\n                <Trans>Message body</Trans>\n              </label>\n              <textarea onChange={handleChange} name=\"body\" required />\n            </div>\n            <button type=\"submit\" className=\"w-100 save-btn mt-4\">\n              <Trans>Send</Trans>\n            </button>\n          </form>\n        </div>\n      )}\n    </div>\n  );\n}\nexport default NewMessage;\n"],"names":["useState","isLoading","setIsLoading","facilities","setFacilities","formData","setFormData","selected","setSelected","handleChange","e","target","name","value","useEffect","MessageService","then","res","data","catch","err","toast","className","onSubmit","preventDefault","length","subject","body","reciever","map","item","options","label","id","onChange","labelledBy","type","required"],"sourceRoot":""}